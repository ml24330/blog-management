{"version":3,"sources":["components/Navigation.js","pages/HomePage.js","components/Warning.js","config.js","pages/PostsPage.js","useLocalStorage.js","assets/images/placeholder.png","pages/AddAuthorPage.js","pages/AuthorsPage.js","assets/images/time.svg","components/PreviewComponent.js","assets/images/placeholder.jpeg","pages/AddPostPage.js","pages/PostPage.js","pages/AuthorPage.js","pages/NotFoundPage.js","ScrollToTop.js","pages/VisitorsPage.js","pages/Converter.js","App.js","reportWebVitals.js","index.js"],"names":["useStyles","makeStyles","theme","link","fontSize","color","menuButton","marginRight","spacing","title","flexGrow","Navigation","name","useCookies","removeCookie","_removeCookie","classes","AppBar","position","Toolbar","to","className","IconButton","edge","Typography","variant","Button","onClick","localStorage","clear","window","location","reload","page","padding","root","width","margin","card","minHeight","background","bullet","display","transform","pos","marginBottom","foot","bottom","left","textDecoration","HomePage","component","Box","textAlign","Card","CardContent","div","cursor","Warning","useEffect","scrollTo","API_URL","WEBSITE_URL","React","require","PostsPage","useState","posts","setPosts","loggedIn","setLoggedIn","columns","field","headerName","flex","minWidth","valueFormatter","params","value","join","date","d","Date","day","getDate","month","getMonth","year","getFullYear","renderDate","sortable","renderCell","style","href","rel","target","a","fetch","credentials","res","status","json","dat","merged","map","post","_author","authors","length","author","_categories","categories","url","slice","slug","id","_id","reverse","autoHeight","sortingOrder","rows","useLocalStorage","key","initialValue","item","getItem","JSON","parse","error","console","log","storedValue","setStoredValue","valueToStore","Function","setItem","stringify","AUTHOR_TEMPLATE","category","bio","input_long","button","image","remove","marginLeft","AddAuthorPage","setAuthor","setStatus","setImage","exists","v","undefined","handleInput","e","prevAuthor","handleSubmit","formData","FormData","append","method","body","handleClear","TextField","label","onChange","InputLabel","Select","MenuItem","src","placeholder","alt","onError","onerror","URL","createObjectURL","type","accept","files","AuthorsPage","setAuthors","withId","_image","charAt","toUpperCase","modal","top","backgroundColor","zIndex","right","marginTop","caption","PreviewComponent","setIsOpen","isOpen","idx","rehypePlugins","rehypeRaw","time","Math","ceil","readingTime","removeMd","content","split","wordsPerMinute","minutes","POST_TEMPLATE","visits","now","input","icon","textarea","maxHeight","overflow","AddPostPage","setPost","newAuthor","setNewAuthor","newCategory","setNewCategory","setCaption","pastebin","useRef","prevPost","handleInputForArray","newArray","index","handleAdd","push","handleRemoveFromArray","splice","post_res","data","f","slug_exists","visits_create_res","headers","visits_set_res","toISOString","substr","cat","inputRef","onPaste","startpos","current","selectionStart","endpos","selectionEnd","focus","setTimeout","html","innerHTML","md","TurndownService","turndown","output","substring","replace","multiline","contentEditable","ref","opacity","PostPage","match","history","modified","setModified","hasImage","setHasImage","visits_res","visits_dat","img_res","handleDelete","confirm","removeItem","AuthorPage","NotFoundPage","withRouter","unlisten","listen","VisitorsPage","visitors","setVisitors","countries","setCountries","entries","setEntries","failed","setFailed","visitorColumns","pw","prompt","entry","locmap","forEach","arr","Object","keys","country","sort","b","entrymap","arr2","reset","red","flexDirection","select","bodyRegexSimple","RegExp","footnoteRegexSimple","Converter","hasConverted","setHasConverted","footnote","handlePaste","convertArticleBody","convertFootnotes","lockArticle","setAttribute","bodyTextbox","footnoteTextbox","text","navigator","clipboard","writeText","alert","for","height","copyArticleToClipboard","removeAttribute","float","App","path","exact","reportWebVitals","onPerfEntry","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","CookiesProvider","document","getElementById"],"mappings":"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","file":"static/js/main.9932373c.chunk.js","sourcesContent":["import React from 'react'\nimport { Link } from 'react-router-dom'\nimport { makeStyles } from '@material-ui/core/styles'\nimport AppBar from '@material-ui/core/AppBar'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport Typography from '@material-ui/core/Typography'\nimport IconButton from '@material-ui/core/IconButton'\nimport Button from '@material-ui/core/Button'\nimport HomeIcon from '@material-ui/icons/Home';\nimport { useCookies } from \"react-cookie\"\n\nconst useStyles = makeStyles(theme => ({\n  link: {\n      fontSize: '1rem',\n      '&:hover': {\n        color: '#CBC3E3'\n     }\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    flexGrow: 1,\n  },\n}))\n\nexport default function Navigation({ name }) {\n\n  const [_0, _1, removeCookie] = useCookies(['session-token'])\n  const [_2, _3, _removeCookie] = useCookies(['auth-token'])\n\n\n  const classes = useStyles()\n\n  return (\n    <AppBar position=\"static\">\n      <Toolbar>\n        <Link to=\"/\" className={classes.link}>\n          <IconButton\n            edge=\"start\"\n            color=\"inherit\"\n            aria-label=\"menu\"\n            className={classes.menuButton}\n          >\n            <HomeIcon />\n          </IconButton>\n        </Link>\n        <Typography variant=\"h6\" className={classes.title}>\n          {name}\n        </Typography>\n        <Button color=\"inherit\" onClick={() => {removeCookie('session-token');_removeCookie('auth-token');localStorage.clear();window.location.reload()}}>\n          Log out\n        </Button>\n      </Toolbar>\n    </AppBar>\n  )\n}","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport Navigation from '../components/Navigation'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Card from '@material-ui/core/Card'\nimport CardContent from '@material-ui/core/CardContent'\nimport Typography from '@material-ui/core/Typography'\nimport Box from '@material-ui/core/Box'\n\nconst useStyles = makeStyles({\n    page: {\n        padding: '2% 10%'\n    },\n    root: {\n      width: '48%',\n      margin: '2%'\n    },\n    card: {\n      minHeight: '150px',\n      '&:hover': {\n        background: '#CBC3E3',\n     }\n    },\n    bullet: {\n      display: 'inline-block',\n      margin: '0 2px',\n      transform: 'scale(0.8)',\n    },\n    title: {\n      fontSize: 14,\n    },\n    pos: {\n      marginBottom: 12,\n    },\n    foot: {\n      position: 'absolute',\n      bottom: '10px',\n      left: '10px',\n      textDecoration: 'underline'\n    }\n  })\n\nexport default function HomePage() {\n\n    const classes = useStyles()    \n\n    return (\n        <>\n        <Navigation name={'Home'} />\n        <div className={classes.page}>\n            <Typography component=\"div\">\n            <Box fontSize=\"h3.fontSize\" textAlign=\"center\">\n                Welcome!\n            </Box>\n            </Typography>\n            <Box>\n                <Link to=\"/posts\" className={classes.root}>\n                    <Card className={classes.card}>\n                        <CardContent>\n                            <Typography variant=\"h5\" component=\"h2\">\n                                Blog Posts\n                            </Typography>\n                            <br />\n                            <Typography variant=\"body2\" component=\"p\">\n                                Click here to view and edit all posts published to the LSE Law Review Blog.\n                            </Typography>\n                        </CardContent>\n                    </Card>\n                </Link>\n                <Link to=\"/authors\" className={classes.root}>\n                    <Card className={classes.card} >\n                        <CardContent>\n                            <Typography variant=\"h5\" component=\"h2\">\n                                Blog Authors\n                            </Typography>\n                            <br />\n                            <Typography variant=\"body2\" component=\"p\">\n                                Click here to view and edit the details of all contributors and editors of the LSE Law Review Blog.\n                            </Typography>\n                        </CardContent>\n                    </Card>\n                </Link>\n                <Link to=\"/converter\" className={classes.root}>\n                    <Card className={classes.card}>\n                        <CardContent>\n                            <Typography variant=\"h5\" component=\"h2\">\n                                Article Converter\n                            </Typography>\n                            <br />\n                            <Typography variant=\"body2\" component=\"p\">\n                                Click here to pair up references in a blog article.\n                            </Typography>\n                        </CardContent>\n                    </Card>\n                </Link>\n            </Box>\n            <Link to=\"/visitors\"><Typography className={classes.foot} variant=\"body2\" component=\"p\">\n                Visitors\n            </Typography></Link>\n        </div>\n        </>\n    )\n}\n","import React, { useEffect } from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles({\n    div: {\n        textAlign: 'center',\n        margin: '15px 0 15px 0'\n    },\n    link: {\n        textDecoration: 'underline',\n        cursor: 'pointer',\n        '&:hover': {\n            color: 'purple'\n        }\n    }\n})\n\nexport default function Warning() {\n\n    useEffect(() => {\n        window.scrollTo(0,0)\n    }, [])\n\n    const classes = useStyles()\n\n    return (\n        <div className={classes.div}>\n            <Typography variant=\"h5\">\n                WARNING: You are not logged in! Click <span onClick={() => {window.location.reload()}} className={classes.link}>here</span> to log in again.\n            </Typography>\n        </div>\n    )\n}\n","export const API_URL = '/api'\nexport const WEBSITE_URL = 'https://blog.lselawreview.com'","import React, { useState, useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport { DataGrid } from '@material-ui/data-grid'\nimport Navigation from '../components/Navigation'\nimport Button from '@material-ui/core/Button'\nimport Warning from '../components/Warning'\nimport { API_URL, WEBSITE_URL } from '../config'\n\nwindow.React = require('react')\n\nconst renderDate = (date) => {\n    const MONTHS = {0: 'January', 1: 'February', 2: 'March', 3: 'April', 4: 'May', 5: 'June', 6: 'July', 7: 'August', 8: 'September', 9: 'October', 10: 'November', 11: 'December'}\n    const d = new Date(date)\n    const day = d.getDate()\n    const month = MONTHS[d.getMonth()]\n    const year = d.getFullYear()\n    return `${day} ${month} ${year}`\n}\n\nexport default function PostsPage() {\n\n    const [posts, setPosts] = useState([])\n    const [loggedIn, setLoggedIn] = useState(true)\n\n    const columns = [\n        {field: 'title', headerName: 'Title', flex: 3, minWidth: 150},\n        {field: '_author', headerName: 'Author', flex: 1.5, minWidth: 150, valueFormatter: (params) => {\n            return params.value.join(' & ')\n        }},\n        {field: '_categories', headerName: 'Categories', flex: 1.4, minWidth: 150},\n        {field: 'date', headerName: 'Date', flex: 1.4, minWidth: 140, valueFormatter: (params) => {\n            return renderDate(new Date(params.value))\n        }},\n        {field: 'content', headerName: 'Content', flex: 3, minWidth: 180},\n        {field: '_id', sortable: false, headerName: '\\n', flex: 0.7, minWidth: 80, renderCell: (params) => (\n            <Link to={`/post/${params.value}`} style={{margin: 'auto'}} ><Button variant=\"contained\" color=\"secondary\" >Edit</Button></Link>\n        )},\n        {field: 'url', sortable: false, headerName: '\\n', flex: 1.5, minWidth: 150, renderCell: (params) => (\n            <a href={params.value} style={{margin: 'auto'}} rel=\"noopener noreferrer\" target=\"_blank\"><Button variant=\"contained\" color=\"primary\">View on blog</Button></a>\n        )}\n    ]\n\n    useEffect(() => {\n        (async () => {\n            const res = await fetch(`${API_URL}/posts`, {\n                credentials: 'include'\n            })\n            if(res.status === 401) {\n                setLoggedIn(false)\n                return\n            }\n            const dat = await res.json()\n            const merged = dat.map(post => {\n                let _author\n                if(post.authors.length) {\n                    _author = post.authors\n                } else {\n                    _author = [post.author]\n                }\n                const _categories = post.categories.join(' & ')\n                const url = `${WEBSITE_URL}/${new Date(post.date).getFullYear()}/${('0' + (new Date(post.date).getMonth() + 1)).slice(-2)}/${post.slug}`\n                const id = post._id\n                return {...post, _author, url, id, _categories}\n            })\n            merged.reverse()\n            setPosts(merged)\n        })()\n    }, [])\n\n    return (\n        <>\n            <Navigation name={'All Posts'} />\n            {!loggedIn && <Warning />}\n            <div style={{margin: '20px', textAlign: 'center'}}>\n                <Link to=\"/posts/add\"><Button variant=\"contained\" color=\"secondary\" >Add Post</Button></Link>\n            </div>\n            <DataGrid autoHeight style={{width: '98%', margin: 'auto'}} sortingOrder={['asc', 'desc']}\n                rows={posts}\n                columns={columns} />\n        </>\n    )\n}\n","import { useState } from 'react';\n\nexport default function useLocalStorage(key, initialValue) {\n    // State to store our value\n    // Pass initial state function to useState so logic is only executed once\n    const [storedValue, setStoredValue] = useState(() => {\n      try {\n        // Get from local storage by key\n        const item = window.localStorage.getItem(key);\n        // Parse stored json or if none return initialValue\n        return item ? JSON.parse(item) : initialValue;\n      } catch (error) {\n        // If error also return initialValue\n        console.log(error);\n        return initialValue;\n      }\n    });\n    // Return a wrapped version of useState's setter function that ...\n    // ... persists the new value to localStorage.\n    const setValue = (value) => {\n      try {\n        // Allow value to be a function so we have same API as useState\n        const valueToStore =\n          value instanceof Function ? value(storedValue) : value;\n        // Save state\n        setStoredValue(valueToStore);\n        // Save to local storage\n        window.localStorage.setItem(key, JSON.stringify(valueToStore));\n      } catch (error) {\n        // A more advanced implementation would handle the error case\n        console.log(error);\n      }\n    };\n    return [storedValue, setValue];\n  }","export default __webpack_public_path__ + \"static/media/placeholder.0a8adf32.png\";","import React, { useState } from 'react'\nimport { Link } from 'react-router-dom'\nimport useLocalStorage from '../useLocalStorage'\nimport Navigation from '../components/Navigation'\nimport TextField from '@material-ui/core/TextField'\nimport Button from '@material-ui/core/Button'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Typography from '@material-ui/core/Typography'\nimport Warning from '../components/Warning'\nimport { API_URL } from '../config'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport Select from '@material-ui/core/Select'\nimport placeholder from '../assets/images/placeholder.png'\n\nconst AUTHOR_TEMPLATE = {\n    name: '',\n    category: '',\n    bio: ''\n}\n\nconst useStyles = makeStyles({\n    page: {\n        padding: '2% 10%'\n    },\n    input_long: {\n        margin: '15px 5px',\n        width: '100%'\n    },\n    button: {\n        margin: '20px 10px',\n        width: '10%'\n    },\n    link: {\n        textDecoration: 'underline',\n        cursor: 'pointer',\n        '&:hover': {\n            color: 'purple'\n        }\n    },\n    image: {\n        width: '30%',\n        margin: '10px 0'\n    },\n    remove: {\n        color: 'red', \n        fontSize: '1.2rem', \n        cursor: 'pointer', \n        marginLeft: '5px',\n        textDecoration: 'underline',\n        '&:hover': {\n            color: 'purple'\n        }\n    }\n})\n\nexport default function AddAuthorPage() {\n\n    const [author, setAuthor] = useLocalStorage('author', AUTHOR_TEMPLATE)\n    const [status, setStatus] = useState('')\n    const [loggedIn, setLoggedIn] = useState(true)\n    const [image, setImage] = useState(null)\n\n    const classes = useStyles()\n\n    const exists = (v) => {\n        return v !== undefined\n    }\n\n    const handleInput = (e, field) => {\n        setAuthor(prevAuthor => {\n            return {...prevAuthor, [field]: e.target.value}\n        })\n    }\n\n    const handleSubmit = async () => {\n        if(!author.name || !author.bio || !author.category) {\n            setStatus('Missing fields!')\n            return\n        }\n        setStatus('Saving...')\n        const formData = new FormData()\n        formData.append('image', image)\n        formData.append('name', author.name)\n        formData.append('bio', author.bio)\n        formData.append('category', author.category)\n        const res = await fetch(`${API_URL}/authors`, {\n            credentials: 'include',\n            method: 'POST',\n            body: formData\n        })\n        if(res.status === 401) {\n            setLoggedIn(false)\n            return\n        }\n        if(res.status === 200) {\n            const { _id } = await res.json()\n            setStatus(<>Author successfully added. Click <Link className={classes.link} to={`/author/${_id}`}>here</Link> to view.</>)\n            handleClear()\n        } else {\n            setStatus(`An error occurred! API returned with status ${res.status}.`)\n        }\n    }\n\n    const handleClear = () => {\n        setAuthor(AUTHOR_TEMPLATE)\n        setImage(null)\n    }\n\n    return (\n        <>\n            <Navigation name={'New Author'} />\n\n            <div className={classes.page}>\n                {!loggedIn && <Warning />}\n                <Link to=\"/authors\">\n                    <Button variant=\"outlined\" color=\"primary\">\n                        Back to all authors\n                    </Button>\n                </Link>\n\n                {exists(author.name) && (<div>\n                    <TextField className={classes.input_long} label=\"Name\" value={author.name} onChange={e => handleInput(e, 'name')} />\n                </div>)}\n\n                {exists(author.bio) && (<div>\n                    <TextField className={classes.input_long} label=\"Bio\" value={author.bio} onChange={e => handleInput(e, 'bio')} />\n                </div>)}\n\n                {exists(author.category) && (<div className={classes.input_long}>\n                    <InputLabel style={{fontSize: '0.8rem'}}>Category</InputLabel>\n                    <Select value={author.category || ''} onChange={e => handleInput(e, 'category')}>\n                        <MenuItem value=\"editor\">Editor</MenuItem>\n                        <MenuItem value=\"contributor\">Contributor</MenuItem>\n                    </Select>\n                </div>)}\n\n                {exists(image) && (<div>\n                    {image === null ? \n                        (<img className={classes.image} src={placeholder} alt=\"placeholder\" />) :\n                        (<img className={classes.image} src={image} onError={(e)=>{e.target.onerror = null; e.target.src= URL.createObjectURL(image)}} alt=\"avatar\" />)\n                    }  \n                    <div>\n                        <input className={classes.input_long} type=\"file\" accept=\".png,.jpg,.jpeg,.gif,.webp,.heif\" onChange={e => setImage(e.target.files[0])} />\n                        {image !== null && <span className={classes.remove} onClick={() => setImage(null)}>Remove image</span>}\n                    </div>\n                </div>)}\n\n                <Button className={classes.button} variant=\"contained\" color=\"primary\" onClick={handleSubmit}>Save</Button>\n                <Button className={classes.button} variant=\"contained\" color=\"secondary\" onClick={handleClear}>Clear</Button>\n                <Typography>\n                    {status}\n                </Typography>\n            </div>\n        </>\n    )\n}\n","import React, { useState, useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport { DataGrid } from '@material-ui/data-grid'\nimport Navigation from '../components/Navigation'\nimport Button from '@material-ui/core/Button'\nimport Warning from '../components/Warning'\nimport { API_URL, WEBSITE_URL } from '../config'\n\nexport default function AuthorsPage() {\n\n    const [authors, setAuthors] = useState([])\n    const [loggedIn, setLoggedIn] = useState(true)\n\n    useEffect(() => {\n        (async () => {\n            const res = await fetch(`${API_URL}/authors`, {\n                credentials: 'include'\n            })\n            if(res.status === 401) {\n                setLoggedIn(false)\n                return\n            }\n            const dat = await res.json()\n            const withId = dat.map(author => {\n                const id = author._id\n                const url = `${WEBSITE_URL}/author/${author.name}`\n                const _image = author.image ? 'Yes' : 'No'\n                return {...author, id, url, _image}\n            })\n            setAuthors(withId)\n        })()\n    }, [])\n\n    const columns = [\n        {field: 'name', headerName: 'Name', flex: 1.8, minWidth: 150},\n        {field: 'category', headerName: 'Category', flex: 1.4, minWidth: 150, valueFormatter: (params) => params.value.charAt(0).toUpperCase() + params.value.slice(1) },\n        {field: 'bio', headerName: 'Bio', flex: 5, minWidth: 150},\n        {field: '_image', headerName: 'Has avatar?', flex: 1.3, minWidth: 150},\n        {field: '_id', sortable: false, headerName: '\\n', flex: 0.7, minWidth: 80, renderCell: (params) => (\n            <Link style={{margin: 'auto'}} to={`/author/${params.value}`}><Button variant=\"contained\" color=\"secondary\">Edit</Button></Link>\n        )},\n        {field: 'url', sortable: false, headerName: '\\n', flex: 1.5, minWidth: 150, renderCell: (params) => (\n            <a href={params.value} style={{margin: 'auto'}} rel=\"noopener noreferrer\" target=\"_blank\"><Button variant=\"contained\" color=\"primary\">View on blog</Button></a>\n        )}\n    ]\n\n    return (\n        <>\n            <Navigation name={'All Authors'} />\n            <div style={{margin: '20px', textAlign: 'center'}}>\n                {!loggedIn && <Warning />}\n                <Link to=\"/authors/add\"><Button variant=\"contained\" color=\"secondary\" >Add Author</Button></Link>\n            </div>\n            <DataGrid autoHeight style={{width: '98%', margin: 'auto'}} sortingOrder={['asc', 'desc']}\n                rows={authors}\n                columns={columns} />\n        </>\n    )\n}\n","export default __webpack_public_path__ + \"static/media/time.416a61b0.svg\";","import React from 'react'\nimport ReactMarkdown from 'react-markdown'\nimport rehypeRaw from 'rehype-raw'\nimport removeMd from 'remove-markdown'\nimport readingTime from 'reading-time'\nimport time from '../assets/images/time.svg'\nimport Button from '@material-ui/core/Button'\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles({\n    modal: {\n        position: 'sticky',\n        top: 0,\n        left: 0,\n        width: '100vw',\n        backgroundColor: 'white',\n        padding: '2% 0',\n        minHeight: '100vh',\n        margin: 0,\n        zIndex: 999,\n        textAlign: 'right'\n    },\n    button: {\n        position: 'sticky',\n        top: '15px',\n        right: '20px'\n    },\n    image: {\n        width: '60%',\n        marginTop: '15px'\n    },\n    caption: {\n        marginRight: '20%',\n        textAlign: 'right',\n        color: 'grey',\n        fontSize: '1rem'\n    }\n})\n\nexport default function PreviewComponent({ setIsOpen, isOpen, post, image, caption }) {\n\n    const classes = useStyles()\n\n    const renderDate = (date) => {\n        const MONTHS = {0: 'January', 1: 'February', 2: 'March', 3: 'April', 4: 'May', 5: 'June', 6: 'July', 7: 'August', 8: 'September', 9: 'October', 10: 'November', 11: 'December'}\n        const d = new Date(date)\n        const day = d.getDate()\n        const month = MONTHS[d.getMonth()]\n        const year = d.getFullYear()\n        return `${day} ${month} ${year}`\n    }\n    \n    return (\n        <>\n            {isOpen && (\n                <div className={classes.modal}>\n                    <Button className={classes.button} variant=\"contained\" color=\"secondary\" onClick={() => setIsOpen(false)}>Close</Button>\n                    <div className=\"post-container\">\n                        {post.authors.length !== 0 && <span className=\"post-author\">{post.authors.map((author, idx) => (\n                            <span key={author}>\n                                <span>{author}</span>\n                                {idx+1 !== post.authors.length && <span> & </span>}\n                            </span>\n                        ))}</span>}\n                        <span> - </span>\n                        <span>{post.categories.map((category, idx) => (\n                            <span key={category}>\n                            <span>{category}</span>\n                            {idx+1 !== post.categories.length && <span> & </span>}\n                        </span>\n                        ))}</span>\n                        <div className=\"post-title\"><ReactMarkdown rehypePlugins={[rehypeRaw]}>{post.title}</ReactMarkdown></div>\n                        <div className=\"post-meta\">\n                            <span className=\"post-date\">{renderDate(post.date)}</span>\n                            <span className=\"post-time\"><img src={time} alt=\"time\" />{Math.ceil(readingTime(removeMd(post.content).split('[1]')[0], { wordsPerMinute: 250 }).minutes)} min read</span>\n                        </div>\n                        {image && <>\n                            <img className={classes.image} src={image} onError={(e)=>{e.target.onerror = null; e.target.src= URL.createObjectURL(image)}} alt=\"avatar\" />\n                            <div className={classes.caption}>{caption || ''}</div>\n                        </>}\n                        <div className=\"page-content\">\n                            <ReactMarkdown rehypePlugins={[rehypeRaw]}>{post.content}</ReactMarkdown>\n                        </div>\n                    </div>\n                </div>\n            )}\n        </>\n    )\n}\n","export default \"data:image/jpeg;base64,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AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB//2Q==\"","import React, { useState, useRef } from 'react'\nimport { Link } from 'react-router-dom'\nimport useLocalStorage from '../useLocalStorage'\nimport PreviewComponent from '../components/PreviewComponent'\nimport Navigation from '../components/Navigation'\nimport TextField from '@material-ui/core/TextField'\nimport Button from '@material-ui/core/Button'\nimport { makeStyles } from '@material-ui/core/styles'\nimport CancelOutlinedIcon from '@material-ui/icons/CancelOutlined'\nimport Typography from '@material-ui/core/Typography'\nimport AddIcon from '@material-ui/icons/Add'\nimport Warning from '../components/Warning'\nimport { API_URL } from '../config'\nimport placeholder from '../assets/images/placeholder.jpeg'\nimport TurndownService from 'turndown'\n\nconst POST_TEMPLATE = {\n    title: '',\n    author: '',\n    authors: [],\n    categories: [],\n    visits: 0,\n    content: '',\n    date: Date.now()\n}\n\nconst useStyles = makeStyles({\n    page: {\n        padding: '2% 10%'\n    },\n    input_long: {\n        margin: '15px 5px',\n        width: '100%'\n    },\n    input: {\n        margin: '15px 5px',\n        width: 'max(20%,200px)'\n    },\n    icon: {\n        position: 'absolute',\n        width: '40px',\n        transform: 'translate(-40px,33px)',\n        cursor: 'pointer',\n        '&:hover': {\n            color: 'purple'\n        }\n    },\n    button: {\n        margin: '20px 10px',\n        width: '10%'\n    },\n    textarea: {\n        margin: '5px',\n        width: '100%',\n        maxHeight: '300px',\n        overflow: 'scroll',\n        '&:hover': {\n            maxHeight: 'unset'\n        }\n    },\n    link: {\n        textDecoration: 'underline',\n        cursor: 'pointer',\n        '&:hover': {\n            color: 'purple'\n        }\n    },\n    image: {\n        width: '40%',\n        margin: '10px 0'\n    },\n    remove: {\n        color: 'red', \n        fontSize: '1.2rem', \n        cursor: 'pointer', \n        marginLeft: '5px',\n        textDecoration: 'underline',\n        '&:hover': {\n            color: 'purple'\n        }\n    }\n})\n\nexport default function AddPostPage() {\n\n    const [post, setPost] = useLocalStorage('post', POST_TEMPLATE)\n    const [newAuthor, setNewAuthor] = useLocalStorage('n-a', '')\n    const [newCategory, setNewCategory] = useLocalStorage('n-c', '')\n    \n    const [image, setImage] = useState(null)\n    const [caption, setCaption] = useState('')\n    const [status, setStatus] = useState('')\n    const [isOpen, setIsOpen] = useState(false)\n    const [loggedIn, setLoggedIn] = useState(true)\n\n    const classes = useStyles()\n\n    const pastebin = useRef(null)\n    const content = useRef(null)\n\n    const exists = (v) => {\n        return v !== undefined\n    }\n\n    const handlePaste = (e) => {\n        const startpos = content.current.selectionStart\n        const endpos = content.current.selectionEnd\n        pastebin.current.focus()\n        setTimeout(() => {\n            const html = pastebin.current.innerHTML\n            pastebin.current.innerHTML = ''\n            const turndownService = new TurndownService()\n            const md = turndownService.turndown(html)\n            const output = `${post.content.substring(0, startpos)}${md}${post.content.substring(endpos)}`.replace(/\\\\/g, '')\n            content.current.focus()\n            setPost(prevPost => {\n                return {...prevPost, content: output }\n            })\n            content.current.selectionEnd = endpos + md.length\n        }, [])\n    }\n\n    const handleInput = (e, field) => {\n        setPost(prevPost => {\n            return {...prevPost, [field]: e.target.value}\n        })\n    }\n\n    const handleInputForArray = (e, field, idx) => {\n        setPost(prevPost => {\n            const newArray = prevPost[field].map((item, index) => index === idx ? e.target.value : item)\n            console.log(prevPost)\n            return {...prevPost, [field]: newArray}\n        })\n    }\n\n    const handleAdd = (value, field) => {\n        if(!value) return\n        setPost(prevPost => {\n            const newArray = [...prevPost[field]]\n            newArray.push(value)\n            return {...prevPost, [field]: newArray}\n        })\n    }\n\n    const handleRemoveFromArray = (idx, field) => {\n        setPost(prevPost => {\n            const newArray = [...prevPost[field]]\n            newArray.splice(idx, 1)\n            return {...prevPost, [field]: newArray}\n        })\n    }\n\n    const handleClear = () => {\n        setPost(POST_TEMPLATE)\n        setNewAuthor('')\n        setImage(null)\n    }\n\n    const handleSubmit = async () => {\n        if(!post.title || !post.date || !post.authors.length || !post.categories.length || !post.content) {\n            setStatus('Missing fields!')\n            return\n        }\n        if(post.visits < 0 || post.visits % 1) {\n            setStatus('The number of visits must be a non-negative integer!')\n            return\n        }\n        setStatus('Saving...')\n        const formData = new FormData()\n        formData.append('title', post.title)\n        formData.append('categories', JSON.stringify(post.categories))\n        formData.append('date', post.date)\n        formData.append('content', post.content)\n        if(post.authors.length > 1) {\n            formData.append('authors', JSON.stringify(post.authors))\n        } else {\n            formData.append('author', post.authors[0])\n        }\n        const post_res = await fetch(`${API_URL}/posts`, {\n            credentials: 'include',\n            method: 'POST',\n            body: formData\n        })\n        if(post_res.status === 401) {\n            setLoggedIn(false)\n            return\n        }\n        if(post_res.status !== 200) {\n            setStatus(`An error occurred! API returned with status ${post_res.status}`)\n            return\n        }\n        const data = await post_res.json()\n        const f = new FormData()\n        f.append('image', image)\n        f.append('caption', caption)\n        await fetch(`${API_URL}/images/${data.slug}`, {\n            credentials: 'include',\n            method: 'POST',\n            body: f\n        })\n        const slug_exists = await fetch(`${API_URL}/visits/${data.slug}`, {\n            credentials: 'include'\n        })\n        if(slug_exists.status === 401) {\n            setLoggedIn(false)\n            return\n        }\n        if(slug_exists.status !== 200) {\n            const visits_create_res = await fetch(`${API_URL}/visits/${data.slug}`, {\n                credentials: 'include',\n                method: 'POST'\n            })\n            if(visits_create_res.status === 401) {\n                setLoggedIn(false)\n                return\n            }\n            if(visits_create_res.status !== 200) {\n                setStatus(`An error occurred! API returned with status ${visits_create_res.status}`)\n                return\n            } \n        }\n        const visits_set_res = await fetch(`${API_URL}/visits/${data.slug}`, {\n            credentials: 'include',\n            method: 'PATCH',\n            headers: { 'content-type': 'application/json' },\n            body: JSON.stringify({ type: 'set', value: post.visits })\n        })\n        if(visits_set_res.status === 401) {\n            setLoggedIn(false)\n            return\n        }\n        if(visits_set_res.status !== 200) {\n            setStatus(`An error occurred! API returned with status ${visits_set_res.status}`)\n            return\n        }\n        setStatus(<>Post successfully added. Click <Link className={classes.link} to={`/post/${data._id}`}>here</Link> to view.</>)\n        handleClear()\n    }\n\n    return (\n        <>\n            <Navigation name={'New Post'} />\n\n            <PreviewComponent setIsOpen={setIsOpen} isOpen={isOpen} post={post} image={image && image} caption={image && caption}/>\n            \n            <div className={classes.page} >\n                {!loggedIn && <Warning />}\n                <Link to=\"/posts\">\n                    <Button variant=\"outlined\" color=\"primary\">\n                        Back to all posts\n                    </Button>\n                </Link>\n\n                {exists(post.title) && (<div>\n                    <TextField className={classes.input_long} label=\"Title\" value={post.title} onChange={e => handleInput(e, 'title')} />\n                </div>)}\n\n                {exists(post.date) && (<div>\n                    <TextField className={classes.input_long} label=\"Date\" type=\"date\" value={new Date(post.date || 0).toISOString().substr(0,10)} onChange={e => handleInput(e, 'date')} />\n                </div>)}\n\n                {exists(post.categories) && (<div>{post.categories.map((cat, idx) => (\n                    <span key={idx} ><TextField className={classes.input} label=\"Category\" value={cat} onChange={e => handleInputForArray(e, 'categories', idx)} /><CancelOutlinedIcon style={{color: 'darkred'}} className={classes.icon} onClick={() => handleRemoveFromArray(idx, 'categories')} /></span>\n                ))}\n                    <TextField className={classes.input} label=\"New Category\" value={newCategory} onChange={e => setNewCategory(e.target.value)} />\n                    <AddIcon style={{color: 'green'}} className={classes.icon}  onClick={() => {handleAdd(newCategory, 'categories'); setNewCategory('')}} />\n                </div>)}\n\n                {exists(post.authors) && (<div>{post.authors.map((author, idx) => (\n                    <span key={idx} ><TextField className={classes.input} label=\"Author\" value={author} onChange={e => handleInputForArray(e, 'authors', idx)} /><CancelOutlinedIcon style={{color: 'darkred'}} className={classes.icon} onClick={() => handleRemoveFromArray(idx, 'authors')} /></span>\n                ))}\n                    <TextField className={classes.input} label=\"New Author\" value={newAuthor} onChange={e => setNewAuthor(e.target.value)} />\n                    <AddIcon style={{color: 'green'}} className={classes.icon} onClick={() => {handleAdd(newAuthor, 'authors'); setNewAuthor('')}} />\n                </div>)}\n\n                {exists(post.visits) && (<div>\n                    <TextField className={classes.input_long} label=\"Views\" type=\"number\" value={post.visits} onChange={e => handleInput(e, 'visits')} />\n                </div>)}\n\n                {exists(image) && (<div>\n                    {image === null ? \n                        (<img className={classes.image} src={placeholder} alt=\"placeholder\" />) :\n                        (<img className={classes.image} src={image} onError={(e)=>{e.target.onerror = null; e.target.src= URL.createObjectURL(image)}} alt=\"avatar\" />)\n                    }\n                    <div>\n                        <input className={classes.input_long} type=\"file\" accept=\".png,.jpg,.jpeg,.gif,.webp,.heif\" onChange={e => setImage(e.target.files[0])} />\n                        {image !== null && <>\n                            <span className={classes.remove} onClick={() => setImage(null)} >Remove image</span>\n                            <TextField className={classes.input_long} label=\"Caption\" value={caption || ''} onChange={e => setCaption(e.target.value)} />\n                        </>}\n                    </div>\n                </div>)}\n\n                {exists(post.content) && (<div>\n                    <TextField inputRef={content} onPaste={handlePaste} className={classes.textarea} multiline={true} label=\"Content\" value={post.content || ''} onChange={e => handleInput(e, 'content')} />\n                </div>)}\n\n                <Button className={classes.button} variant=\"contained\" color=\"primary\" onClick={handleSubmit}>Save</Button>\n                <Button className={classes.button}  variant=\"contained\" onClick={() => {setIsOpen(true);window.scrollTo(0,0)}}>Preview</Button>\n                <Button className={classes.button}  variant=\"contained\" color=\"secondary\" onClick={handleClear}>Clear</Button>\n\n                <Typography>\n                    {status}\n                </Typography>\n\n                <div contentEditable={true} ref={pastebin} style={{opacity: 0, position: 'fixed'}}></div>\n            </div>\n        </>\n    )\n}","import React, { useState, useEffect, useRef } from 'react'\nimport { Link } from 'react-router-dom'\nimport useLocalStorage from '../useLocalStorage'\nimport PreviewComponent from '../components/PreviewComponent'\nimport Navigation from '../components/Navigation'\nimport TextField from '@material-ui/core/TextField'\nimport Button from '@material-ui/core/Button'\nimport { makeStyles } from '@material-ui/core/styles'\nimport CancelOutlinedIcon from '@material-ui/icons/CancelOutlined'\nimport Typography from '@material-ui/core/Typography'\nimport AddIcon from '@material-ui/icons/Add'\nimport Warning from '../components/Warning'\nimport { API_URL } from '../config'\nimport placeholder from '../assets/images/placeholder.jpeg' \nimport TurndownService from 'turndown'\n\nconst useStyles = makeStyles({\n    page: {\n        padding: '2% 10%'\n    },\n    input_long: {\n        margin: '15px 5px',\n        width: '100%'\n    },\n    input: {\n        margin: '15px 5px',\n        width: 'max(20%,200px)'\n    },\n    icon: {\n        position: 'absolute',\n        width: '40px',\n        transform: 'translate(-40px,33px)',\n        cursor: 'pointer',\n        '&:hover': {\n            color: 'purple'\n        }\n    },\n    button: {\n        margin: '20px 10px',\n        width: '10%'\n    },\n    textarea: {\n        margin: '10px 5px',\n        width: '100%',\n        maxHeight: '300px',\n        overflow: 'scroll',\n        '&:hover': {\n            maxHeight: 'unset'\n        }\n    },\n    link: {\n        textDecoration: 'underline',\n        cursor: 'pointer',\n        '&:hover': {\n            color: 'purple'\n        }\n    },\n    image: {\n        width: '40%',\n        margin: '10px 0'\n    },\n    remove: {\n        color: 'red', \n        fontSize: '1.2rem', \n        cursor: 'pointer', \n        marginLeft: '5px',\n        textDecoration: 'underline',\n        '&:hover': {\n            color: 'purple'\n        }\n    }\n})\n\nexport default function PostPage({ match, history }) {\n\n    const [post, setPost] = useLocalStorage(`post_${match.params.id}`, {})\n    const [modified, setModified] = useLocalStorage(`modified_${match.params.id}`, false)\n    const [newAuthor, setNewAuthor] = useLocalStorage(`n-a_${match.params.id}`, '')\n    const [newCategory, setNewCategory] = useLocalStorage(`n-c_${match.params.id}`, '')\n    const [image, setImage] = useState(placeholder)\n    const [caption, setCaption] = useState('')\n    const [hasImage, setHasImage] = useState(false)\n    \n    const [status, setStatus] = useState('')\n    const [isOpen, setIsOpen] = useState(false)\n    const [loggedIn, setLoggedIn] = useState(true)\n\n    const classes = useStyles()\n\n    const pastebin = useRef(null)\n    const content = useRef(null)\n\n    useEffect(() => {\n        if(!modified) {\n            (async () => {\n                const res = await fetch(`${API_URL}/post/id/${match.params.id}`, {\n                    credentials: 'include'\n                })\n                if(res.status === 401) {\n                    setLoggedIn(false)\n                    return\n                }\n                if(res.status === 404) {\n                    history.push('/404')\n                }\n                const dat = await res.json()\n                const visits_res = await fetch(`${API_URL}/visits/${dat.slug}`, {\n                    credentials: 'include'\n                })\n                if(visits_res.status === 401) {\n                    setLoggedIn(false)\n                    return\n                }\n                const visits_dat = await visits_res.json()\n                if(dat.author) {\n                    dat.authors = [dat.author]\n                }\n                setPost({...dat, visits: visits_dat.visits})\n            })()\n        }\n    }, [match.params.id, modified])\n\n    useEffect(() => {\n        (async () => {\n            const res = await fetch(`${API_URL}/images/${post.slug}`, {\n                credentials: 'include'\n            })\n            console.log(res)\n            if(res.status !== 200) {\n                setImage(placeholder)\n            } else {\n                const { url, caption } = await res.json()\n                console.log(url, caption)\n                setCaption(caption)\n                if(image) {\n                    setHasImage(true)\n                    setImage(url)\n                } else {\n                    setImage(placeholder)\n                }\n            }\n        })()\n    }, [post.slug])\n\n    const cleanUp = () => {\n            localStorage.removeItem(`post_${match.params.id}`)\n            localStorage.removeItem(`modified_${match.params.id}`)\n            localStorage.removeItem(`n-a_${match.params.id}`)\n            localStorage.removeItem(`n-c_${match.params.id}`)\n        }\n\n    const exists = (v) => {\n        return v !== undefined\n    }\n\n    const handlePaste = (e) => {\n        setModified(true)\n        const startpos = content.current.selectionStart\n        const endpos = content.current.selectionEnd\n        pastebin.current.focus()\n        setTimeout(() => {\n            const html = pastebin.current.innerHTML\n            pastebin.current.innerHTML = ''\n            const turndownService = new TurndownService()\n            const md = turndownService.turndown(html)\n            const output = `${post.content.substring(0, startpos)}${md}${post.content.substring(endpos)}`.replace(/\\\\/g, '')\n            content.current.focus()\n            setPost(prevPost => {\n                return {...prevPost, content: output }\n            })\n            content.current.selectionEnd = endpos + md.length\n        }, 0)\n    }\n\n    const handleInput = (e, field) => {\n        setModified(true)\n        setPost(prevPost => {\n            return {...prevPost, [field]: e.target.value}\n        })\n    }\n\n    const handleInputForArray = (e, field, idx) => {\n        setModified(true)\n        setPost(prevPost => {\n            const newArray = prevPost[field].map((item, index) => index === idx ? e.target.value : item)\n            return {...prevPost, [field]: newArray}\n        })\n    }\n\n    const handleAdd = (value, field) => {\n        if(!value) return\n        setModified(true)\n        setPost(prevPost => {\n            const newArray = [...prevPost[field]]\n            newArray.push(value)\n            return {...prevPost, [field]: newArray}\n        })\n    }\n\n    const handleRemoveFromArray = (idx, field) => {\n        setModified(true)\n        setPost(prevPost => {\n            const newArray = [...prevPost[field]]\n            newArray.splice(idx, 1)\n            return {...prevPost, [field]: newArray}\n        })\n    }\n\n    const handleReset = () => {\n        setModified(false)\n    }\n\n    const handleSubmit = async () => {\n        if(!post.title || !post.date || !post.authors.length || !post.categories.length || !post.content) {\n            setStatus('Missing fields!')\n            return\n        }\n        if(post.visits < 0 || post.visits % 1) {\n            setStatus('The number of visits must be a non-negative integer!')\n            return\n        }\n        setStatus('Saving...')\n        const formData = new FormData()\n        formData.append('title', post.title)\n        formData.append('categories', JSON.stringify(post.categories))\n        formData.append('date', post.date)\n        formData.append('content', post.content)\n        if(post.authors.length > 1) {\n            formData.append('authors', JSON.stringify(post.authors))\n        } else {\n            formData.append('author', post.authors[0])\n        }\n        const post_res = await fetch(`${API_URL}/posts/${post._id}`, {\n            credentials: 'include',\n            method: 'PATCH',\n            body: formData\n        })\n        if(post_res.status === 401) {\n            setLoggedIn(false)\n            return\n        }\n        if(post_res.status !== 200) {\n            setStatus(`An error occurred! API returned with status ${post_res.status}`)\n            return\n        }\n        const visits_res = await fetch(`${API_URL}/visits/${post.slug}`, {\n            credentials: 'include',\n            method: 'PATCH',\n            headers: { 'content-type': 'application/json' },\n            body: JSON.stringify({ type: 'set', value: post.visits })\n        })\n        if(visits_res.status === 401) {\n            setLoggedIn(false)\n            return\n        }\n        if(visits_res.status !== 200) {\n            setStatus(`An error occurred! API returned with status ${visits_res.status}`)\n            return\n        }\n        if(typeof image == 'object' && image !== null) {\n            const f = new FormData()\n            f.append('image', image)\n            f.append('caption', caption)\n            const img_res = await fetch(`${API_URL}/images/${post.slug}`, {\n                credentials: 'include',\n                method: 'PATCH',\n                body: f\n            })\n            if(img_res.status !== 200) {\n                setStatus(`An error occurred! API returned with status ${img_res.status}`)\n                return\n            }\n        } else if(image === null) {\n            await fetch(`${API_URL}/images/${post.slug}`, {\n                credentials: 'include',\n                method: 'DELETE'\n            })\n        } else {\n            const f = new FormData()\n            f.append('caption', caption)\n            await fetch(`${API_URL}/images/${post.slug}`, {\n                credentials: 'include',\n                method: 'PATCH',\n                body: f\n            })\n        }\n        setStatus(<>Post successfully saved. <span className={classes.link} onClick={() => {setModified(false);window.location.reload()}}>Refresh</span> the page to see.</>)\n    }\n\n    const handleDelete = async () => {\n        const alert = window.confirm(`Are you sure you want to delete the post ${post.title}? This cannot be undone.`)\n        if(alert === false) {\n            return\n        }\n        setStatus('Deleting...')\n        const post_res = await fetch(`${API_URL}/posts/${post._id}`, {\n            credentials: 'include',\n            method: 'DELETE'\n        })\n        if(post_res.status === 401) {\n            setLoggedIn(false)\n            return\n        }\n        if(post_res.status === 204) {\n            setStatus(<>Post successfully deleted. Go back to all posts <Link className={classes.link} to={`/posts`}>here</Link>. </>)\n            cleanUp()\n        } else {\n            setStatus(`An error occurred! API returned with status ${post_res.status}.`)\n        }\n    }\n\n    const handleRemoveImage = () => {\n        setHasImage(false)\n        setImage(null)\n    }\n\n    return (\n        <>\n            <Navigation name={post.title} />\n            \n            <PreviewComponent setIsOpen={setIsOpen} isOpen={isOpen} post={post} image={hasImage && image} caption={hasImage && caption}/>\n\n            <div className={classes.page} >\n                {!loggedIn && <Warning />}\n                <Link to=\"/posts\">\n                    <Button variant=\"outlined\" color=\"primary\">\n                        Back to all posts\n                    </Button>\n                </Link>\n\n                {exists(post.title) && (<div>\n                    <TextField className={classes.input_long} label=\"Title\" value={post.title} onChange={e => handleInput(e, 'title')} />\n                </div>)}\n\n                {exists(post.date) && (<div>\n                    <TextField className={classes.input_long} label=\"Date\" type=\"date\" value={new Date(post.date || 0).toISOString().substr(0,10)} onChange={e => handleInput(e, 'date')} />\n                </div>)}\n\n                {exists(post.categories) && (<div>{post.categories.map((cat, idx) => (\n                    <span key={idx} ><TextField className={classes.input} label=\"Category\" value={cat} onChange={e => handleInputForArray(e, 'categories', idx)} /><CancelOutlinedIcon style={{color: 'darkred'}} className={classes.icon} onClick={() => handleRemoveFromArray(idx, 'categories')} /></span>\n                ))}\n                    <TextField className={classes.input} label=\"New Category\" value={newCategory} onChange={e => setNewCategory(e.target.value)} />\n                    <AddIcon style={{color: 'green'}} className={classes.icon}  onClick={() => {handleAdd(newCategory, 'categories'); setNewCategory('')}} />\n                </div>)}\n\n                {exists(post.authors) && (<div>{post.authors.map((author, idx) => (\n                    <span key={idx} ><TextField className={classes.input} label=\"Author\" value={author} onChange={e => handleInputForArray(e, 'authors', idx)} /><CancelOutlinedIcon style={{color: 'darkred'}} className={classes.icon} onClick={() => handleRemoveFromArray(idx, 'authors')} /></span>\n                ))}\n                    <TextField className={classes.input} label=\"New Author\" value={newAuthor} onChange={e => setNewAuthor(e.target.value)} />\n                    <AddIcon style={{color: 'green'}} className={classes.icon} onClick={() => {handleAdd(newAuthor, 'authors'); setNewAuthor('')}} />\n                </div>)}\n\n                {exists(post.visits) && (<div>\n                    <TextField className={classes.input_long} label=\"Views\" type=\"number\" value={post.visits} onChange={e => handleInput(e, 'visits')} />\n                </div>)}\n\n                {exists(image) && (<div>\n                    {image === null ? \n                        (<img className={classes.image} src={placeholder} alt=\"placeholder\" />) :\n                        (<img className={classes.image} src={image} onError={(e)=>{e.target.onerror = null; e.target.src= URL.createObjectURL(image)}} alt=\"avatar\" />)\n                    }\n                    <div>\n                        <input className={classes.input_long} type=\"file\" accept=\".png,.jpg,.jpeg,.gif,.webp,.heif\" onChange={e => {setModified(true); setHasImage(true); setImage(e.target.files[0])}} />\n                        {hasImage && <>\n                            <span className={classes.remove} onClick={handleRemoveImage} >Remove image</span>\n                            <TextField className={classes.input_long} label=\"Caption\" value={caption || ''} onChange={e => setCaption(e.target.value)} />\n                        </>}\n                    </div>\n                </div>)}\n\n                {exists(post.content) && (<div>\n                    <TextField inputRef={content} onPaste={handlePaste} className={classes.textarea} multiline={true} label=\"Content\" value={post.content || ''} onChange={e => handleInput(e, 'content')} />\n                </div>)}\n\n                <Button className={classes.button} variant=\"contained\" color=\"primary\" onClick={handleSubmit}>Save</Button>\n                <Button className={classes.button}  variant=\"contained\" color=\"secondary\" onClick={handleDelete}>Delete</Button>\n                <Button className={classes.button}  variant=\"contained\" onClick={() => {setIsOpen(true);window.scrollTo(0,0)}}>Preview</Button>\n                <Button className={classes.button}  variant=\"contained\" color=\"secondary\" onClick={handleReset}>Reset</Button>\n\n                <Typography>\n                    {status}\n                </Typography>\n\n                <div contentEditable={true} ref={pastebin} style={{opacity: 0, position: 'fixed', top: 0}}></div>\n            </div>\n        </>\n    )\n}\n","import React, { useState, useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport useLocalStorage from '../useLocalStorage'\nimport placeholder from '../assets/images/placeholder.png' \nimport Navigation from '../components/Navigation'\nimport TextField from '@material-ui/core/TextField'\nimport Button from '@material-ui/core/Button'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Typography from '@material-ui/core/Typography'\nimport Warning from '../components/Warning'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport Select from '@material-ui/core/Select'\nimport { API_URL } from '../config'\n\nconst useStyles = makeStyles({\n    page: {\n        padding: '2% 10%'\n    },\n    input_long: {\n        margin: '15px 5px',\n        width: '100%'\n    },\n    button: {\n        margin: '20px 10px',\n        width: '10%'\n    },\n    link: {\n        textDecoration: 'underline',\n        cursor: 'pointer',\n        '&:hover': {\n            color: 'purple'\n        }\n    },\n    image: {\n        width: '30%',\n        margin: '10px 0'\n    },\n    remove: {\n        color: 'red', \n        fontSize: '1.2rem', \n        cursor: 'pointer', \n        marginLeft: '5px',\n        textDecoration: 'underline',\n        '&:hover': {\n            color: 'purple'\n        }\n    }\n})\n\nexport default function AuthorPage({ match, history }) {\n\n    const [author, setAuthor] = useLocalStorage(`author_${match.params.id}`, {})\n    const [image, setImage] = useState()\n    const [modified, setModified] = useLocalStorage(`modified_${match.params.id}`, false)\n    const [status, setStatus] = useState('')\n    const [loggedIn, setLoggedIn] = useState(true)\n\n    const classes = useStyles()\n\n    useEffect(() => {\n        if(!modified) {\n            (async () => {\n                const res = await fetch(`${API_URL}/authors/${match.params.id}`, {\n                    credentials: 'include'\n                })\n                if(res.status === 401) {\n                    setLoggedIn(false)\n                    return\n                }\n                if(res.status === 404) {\n                    history.push('/404')\n                }\n                const dat = await res.json()\n                if(dat.image) {\n                    setImage(dat.image)\n                } else {\n                    setImage(null)\n                }\n                setAuthor(dat)\n            })()\n        }\n    }, [modified])\n\n    const cleanUp = () => {\n        localStorage.removeItem(`author_${match.params.id}`)\n        localStorage.removeItem(`image_${match.params.id}`)\n        localStorage.removeItem(`modified_${match.params.id}`)\n    }\n\n    const exists = (v) => {\n        return v !== undefined\n    }\n\n    const handleInput = (e, field) => {\n        setModified(true)\n        setAuthor(prevAuthor => {\n            return {...prevAuthor, [field]: e.target.value}\n        })\n    }\n    \n    const handleClear = () => {\n        setModified(false)\n    }\n\n    const handleSubmit = async () => {\n        if(!author.name || !author.bio || !author.category) {\n            setStatus('Missing fields!')\n            return\n        }\n        setStatus('Saving...')\n        const formData = new FormData()\n        formData.append('image', image)\n        formData.append('name', author.name)\n        formData.append('bio', author.bio)\n        formData.append('category', author.category)\n        const res = await fetch(`${API_URL}/authors/${author._id}`, {\n            credentials: 'include',\n            method: 'PATCH',\n            body: formData\n        })\n        if(res.status === 401) {\n            setLoggedIn(false)\n            return\n        }\n        if(res.status === 200) {\n            setModified(false)\n            setStatus(<>Author successfully edited. <span className={classes.link} onClick={() => {setModified(false);window.location.reload()}}>Refresh</span> the page to see.</>)\n            \n        } else {\n            setStatus(`An error occurred! API returned with status ${res.status}.`)\n        }\n    }\n\n    const handleDelete = async () => {\n        const alert = window.confirm(`Are you sure you want to delete the author ${author.name}? This cannot be undone.`)\n        if(alert === false) {\n            return\n        }\n        setStatus('Deleting...')\n        const res = await fetch(`${API_URL}/authors/${author._id}`, {\n            credentials: 'include',\n            method: 'DELETE'\n        })\n        if(res.status === 401) {\n            setLoggedIn(false)\n            return\n        }\n        if(res.status === 204) {\n            setStatus(<>Author successfully deleted. Go back to all authors <Link className={classes.link} to={`/authors`}>here</Link>.</>)\n            cleanUp()\n        } else {\n            setStatus(`An error occurred! API returned with status ${res.status}.`)\n        }\n    }\n\n    const handleRemoveImage = () => {\n        setModified(true)\n        setImage(null)\n    }\n\n    return (\n        <>\n            <Navigation name={author.name} />\n\n            <div className={classes.page}>\n                {!loggedIn && <Warning />}\n                <Link to=\"/authors\">\n                    <Button variant=\"outlined\" color=\"primary\">\n                        Back to all authors\n                    </Button>\n                </Link>\n\n                {exists(author.name) && (<div>\n                    <TextField className={classes.input_long} label=\"Name\" value={author.name} onChange={e => handleInput(e, 'name')} />\n                </div>)}\n\n                {exists(author.bio) && (<div>\n                    <TextField className={classes.input_long} label=\"Bio\" value={author.bio || ''} onChange={e => handleInput(e, 'bio')} />\n                </div>)}\n\n                {exists(author.category || '') && (<div className={classes.input_long}>\n                    <InputLabel style={{fontSize: '0.8rem'}}>Category</InputLabel>\n                    <Select value={author.category} onChange={e => handleInput(e, 'category')}>\n                        <MenuItem value=\"editor\">Editor</MenuItem>\n                        <MenuItem value=\"contributor\">Contributor</MenuItem>\n                    </Select>\n                </div>)}\n\n                <div>\n                    {!image ? \n                        (<img className={classes.image} src={placeholder} alt=\"placeholder\" />) :\n                        (<img className={classes.image} src={image} onError={(e)=>{e.target.onerror = null; e.target.src= URL.createObjectURL(image)}} alt=\"avatar\" />)\n                    }\n                    <div>\n                        <input className={classes.input_long} type=\"file\" accept=\".png,.jpg,.jpeg,.gif,.webp,.heif\" onChange={e => {setModified(true); setImage(e.target.files[0])}} />\n                        {image && <span className={classes.remove} onClick={handleRemoveImage} >Remove image</span>}\n                    </div>\n                </div>\n\n                <Button className={classes.button} variant=\"contained\" color=\"primary\" onClick={handleSubmit}>Save</Button>\n                <Button className={classes.button} variant=\"contained\" color=\"secondary\" onClick={handleDelete}>Delete</Button>\n                <Button className={classes.button} variant=\"contained\" color=\"secondary\" onClick={handleClear}>Reset</Button>\n                <Typography>\n                    {status}\n                </Typography>\n            </div>\n        </>\n    )\n}\n","import React, { useEffect } from 'react'\nimport Navigation from '../components/Navigation'\nimport Typography from '@material-ui/core/Typography'\n\nexport default function NotFoundPage({ history }) {\n\n    useEffect(() => {\n        setTimeout(() => {\n            history.push('/')\n        }, 1500)\n    }, [history])\n\n    return (\n        <>\n            <Navigation name=\"Error 404\" />\n            <Typography style={{ textAlign: 'center', margin: '20px' }} variant=\"h4\">\n                The page that you were looking for does not exist. Redirecting you to the home page...\n            </Typography>\n        </>\n    )\n}\n","import { useEffect } from 'react'\nimport { withRouter } from 'react-router-dom'\n\nfunction ScrollToTop({ history }) {\n  useEffect(() => {\n    const unlisten = history.listen(() => {\n      window.scrollTo(0, 0)\n    });\n    return () => {\n      unlisten()\n    }\n  }, [])\n\n  return (null)\n}\n\nexport default withRouter(ScrollToTop)","import React, { useState, useEffect } from 'react'\nimport Navigation from '../components/Navigation'\nimport { DataGrid } from '@material-ui/data-grid'\nimport Typography from '@material-ui/core/Typography'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { API_URL } from '../config' \n\nconst useStyles = makeStyles({\n    title: {\n        margin: '20px',\n        textAlign: 'center'\n    }\n})\n\nexport default function VisitorsPage({ history }) {\n\n    const classes = useStyles()\n\n    const [visitors, setVisitors] = useState([])\n    const [countries, setCountries] = useState([])\n    const [entries, setEntries] = useState([])\n    const [failed, setFailed] = useState(false)\n\n    const visitorColumns = [\n        {field: 'time', headerName: 'Time', flex: 5, minWidth: '200px', valueFormatter: (params) => {\n            return new Date(params.value)\n        }},\n        {field: 'location', headerName: 'Country', flex: 2, minWidth: '200px'},\n        {field: 'entry', headerName: 'Entry point', flex: 5, minWidth: '200px'}\n    ]\n\n    const countryColumns = [\n        {field: 'country', headerName: 'Country', flex: 5, minWidth: '200px'},\n        {field: 'value', headerName: 'Value', flex: 2, minWidth: '100px'}\n    ]\n\n    const entryColumns = [\n        {field: 'entry', headerName: 'Entry point', flex: 5, minWidth: '200px'},\n        {field: 'value', headerName: 'Value', flex: 2, minWidth: '100px'}\n    ]\n\n    useEffect(() => {\n        (async () => {\n            const pw = window.prompt('Please enter the access code to view this page!')\n            const res = await fetch(`${API_URL}/visits/visitors?pw=${pw}`, { \n                credentials: 'include'\n             })\n            if(res.status !== 200) {\n                setFailed(true)\n                return\n            }\n            const dat = await res.json()\n            const merged = dat.map(v => {\n                return {...v, id: v._id, entry: v.entry || 'N/A'}\n            })\n            setVisitors(merged.reverse())\n            const locmap = {}\n            dat.forEach(v => {\n                locmap[v.location] = locmap[v.location] ? ++locmap[v.location] : 1\n            })\n            const arr = []\n            Object.keys(locmap).forEach((country, idx) => {\n                arr.push({id: idx, country, value: locmap[country]})\n            })\n            setCountries(arr.sort((a, b) => a.value > b.value ? -1 : a.value < b.value ? 1 : 0))\n            const entrymap = {}\n            dat.forEach(v => {\n                if(v.entry && v.entry.split('blog.lselawreview.com').length > 1) {\n                    entrymap[v.entry.slice(29)] = entrymap[v.entry.slice(29)] ? ++entrymap[v.entry.slice(29)] : 1\n                }\n            })\n            const arr2 = []\n            Object.keys(entrymap).forEach((entry, idx) => {\n                arr2.push({id: idx, entry, value: entrymap[entry]})\n            })\n            setEntries(arr2.sort((a, b) => a.value > b.value ? -1 : a.value < b.value ? 1 : 0))\n        })()\n    }, [])\n\n    if(failed) {\n        history.push('/')\n    }\n\n    return (\n        <>\n            <Navigation name=\"Visitors\" />\n            <Typography variant=\"h4\" className={classes.title}>\n                Top countries\n            </Typography>\n            <DataGrid autoHeight style={{width: '98%', margin: '10px auto'}} sortingOrder={['asc', 'desc']}\n                rows={countries}\n                columns={countryColumns} />\n            <Typography variant=\"h4\" className={classes.title}>\n                Top entry points\n            </Typography>\n            <DataGrid autoHeight style={{width: '98%', margin: '10px auto'}} sortingOrder={['asc', 'desc']}\n                rows={entries}\n                columns={entryColumns} />\n            <Typography variant=\"h4\" className={classes.title}>\n                All visitors\n            </Typography>\n            <DataGrid autoHeight style={{width: '98%', margin: '10px auto'}} sortingOrder={['asc', 'desc']}\n                rows={visitors}\n                columns={visitorColumns} />\n        </>\n    )\n}\n","import React, { useState, useRef } from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { red } from '@material-ui/core/colors'\nimport Navigation from '../components/Navigation'\nimport Typography from '@material-ui/core/Typography'\nimport Button from '@material-ui/core/Button'\nimport TurndownService from 'turndown'\n\nconst useStyles = makeStyles({\n    page: {\n        padding: '2% 10%'\n    },\n    reset: {\n        backgroundColor: red,\n        '&:hover': {\n            backgroundColor: '#990000'\n        }\n    },\n    flex: {\n        display: 'flex',\n        flexDirection: 'column'\n    },\n    textarea: {\n        minHeight: '150px',\n        padding: '5px'\n    },\n    button: {\n        margin: '5px'\n    },\n    select: {\n        marginLeft: '5px'\n    },\n    label: {\n        margin: '5px 0',\n        fontSize: '1.1rem'\n    }\n})\n\nconst bodyRegexSimple = new RegExp(/\\\\*\\[?\\\\*\\[(\\b[0-9]{1,3}\\b)\\\\*\\]\\\\*\\]?(\\(.*?\\))*/g)\n\nconst footnoteRegexSimple = new RegExp(/\\n\\\\*\\[?\\\\*\\[(\\d+)\\\\*\\]\\\\*\\]?(\\(.*?\\))*/g)\n\nexport default function Converter() {\n\n    const classes = useStyles()\n\n    const [hasConverted, setHasConverted] = useState(false)\n\n    const body = useRef(null)\n    const footnote = useRef(null)\n    const pastebin = useRef(null)\n\n    const handlePaste = (ref) => {\n        if(hasConverted) {\n            return\n        }\n        const startpos = ref.current.selectionStart\n        const endpos = ref.current.selectionEnd\n        pastebin.current.focus()\n        setTimeout(() => {\n            const html = pastebin.current.innerHTML\n            pastebin.current.innerHTML = ''\n            const turndownService = new TurndownService()\n            const md = turndownService.turndown(html)\n            const output = `${ref.current.value.substring(0, startpos)}${md}${ref.current.value.substring(endpos)}`\n            ref.current.focus()\n            ref.current.value = output\n            ref.current.selectionEnd = endpos + md.length\n        }, [])\n    }\n\n    function convertArticleBody() {\n        if (hasConverted) { return }\n\n        body.current.value = body.current.value.replace(bodyRegexSimple, \"<a class=\\\"inline-reference\\\" id=\\\"inline$1\\\" href=\\\"#$1\\\">$1</a>\")\n    }\n\n    function convertFootnotes() {\n        if (hasConverted) { return }\n\n        footnote.current.value = `\\n${footnote.current.value}`\n        footnote.current.value = footnote.current.value.replace(footnoteRegexSimple, \"\\n<a class=\\\"reference\\\" id=\\\"$1\\\" href=\\\"#inline$1\\\">[$1]</a>\")\n        footnote.current.value = footnote.current.value.substring(1)\n    }\n\n    function lockArticle() {\n        body.current.setAttribute('readonly', '')\n        body.current.style.color = 'gray'\n\n        footnote.current.setAttribute('readonly', '')\n        footnote.current.style.color = 'gray'\n    }\n\n    async function copyArticleToClipboard() {\n        let bodyTextbox = body.current\n        let footnoteTextbox = footnote.current\n        let text = bodyTextbox.value + '\\n\\n*****\\n\\n' + footnoteTextbox.value\n\n        console.log(await navigator.clipboard.writeText(text))\n        alert(\"Article converted and copied to clipboard successfully.\")\n    }\n\n    function convertCopyButtonClicked() {\n        lockArticle()\n        convertArticleBody()\n        convertFootnotes()\n        copyArticleToClipboard()\n        setHasConverted(true)\n    }\n\n    function convertButtonClicked() {\n        lockArticle()\n        convertArticleBody()\n        convertFootnotes()\n        alert(\"Article converted successfully.\")\n        setHasConverted(true)\n    }\n\n    function resetButtonClicked() {\n        setHasConverted(false)\n        let bodyTextbox = body.current\n        bodyTextbox.value = \"\"\n        bodyTextbox.style.color = 'black'\n        bodyTextbox.removeAttribute('readonly')\n\n        let footnoteTextbox = footnote.current\n        footnoteTextbox.value = \"\"\n        footnoteTextbox.style.color = 'black'\n        footnoteTextbox.removeAttribute('readonly')\n    }\n\n    return (\n        <>\n            <Navigation name=\"Article Converter\" />\n            <div className={classes.page}>\n                <Typography variant=\"h4\">LSE Law Review Article Converter</Typography>\n                    <div className={classes.flex}>\n                        <label for=\"bodytextbox\" className={classes.label}>Main Article Body:</label>\n                        <textarea className={classes.textarea} id=\"bodytextbox\" onPaste={() => handlePaste(body)} ref={body} placeholder=\"Type or paste the main article body here, then click the buttons below to convert the footnote format.\"></textarea>\n                    </div>\n                    <br />\n\n                    <div className={classes.flex} style={{height: '25%'}}>\n                        <label for=\"footnotestextbox\" className={classes.label}>Footnotes:</label>\n                        <textarea className={classes.textarea} id=\"footnotestextbox\" ref={footnote} onPaste={() => handlePaste(footnote)} placeholder=\"Type or paste the article footnotes section here, then click the buttons below to convert the footnote format.\"></textarea>\n                    </div>\n\n                    <div className={classes.button} style={{height: '10%'}}>\n                        <br />\n                        <Button variant=\"contained\" color=\"primary\" onClick={convertCopyButtonClicked} className={classes.button}>Convert and Copy Entire Article</Button>\n                        <Button variant=\"contained\" color=\"primary\" onClick={convertButtonClicked} className={classes.button}>Convert Only</Button>\n                        <Button variant=\"contained\" color=\"secondary\" onClick={resetButtonClicked} className={classes.button} style={{float: 'right'}}>Reset</Button>\n                    </div>\n            </div>\n\n            <div contentEditable={true} ref={pastebin} style={{opacity: 0, position: 'fixed'}}></div>\n        </>\n    )\n}\n","import './App.css';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\nimport HomePage from './pages/HomePage'\nimport PostsPage from './pages/PostsPage'\nimport AddAuthorPage from './pages/AddAuthorPage'\nimport AuthorsPage from './pages/AuthorsPage'\nimport AddPostPage from './pages/AddPostPage'\nimport PostPage from './pages/PostPage'\nimport AuthorPage from './pages/AuthorPage'\nimport NotFoundPage from './pages/NotFoundPage'\nimport ScrollToTop from './ScrollToTop'\nimport VisitorsPage from './pages/VisitorsPage'\nimport Converter from './pages/Converter'\n\nfunction App() {\n  return (\n    <Router>\n      <ScrollToTop />\n        <Switch>\n          <Route path=\"/\" exact component={HomePage} />\n          <Route path=\"/posts/add\" exact component={AddPostPage} />\n          <Route path=\"/posts\" exact component={PostsPage} />\n          <Route path=\"/authors/add\" exact component={AddAuthorPage} />\n          <Route path=\"/authors\" exact component={AuthorsPage} />\n          <Route path=\"/post/:id\" exact component={PostPage} />\n          <Route path=\"/author/:id\" exact component={AuthorPage} />\n          <Route path=\"/visitors\" exact component={VisitorsPage} />\n          <Route path=\"/converter\" exact component={Converter} />\n          <Route path=\"/\" component={NotFoundPage} />\n        </Switch> \n    </Router>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './main.css'\nimport './override.css'\nimport { CookiesProvider } from \"react-cookie\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <CookiesProvider>\n      <App />\n    </CookiesProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}