(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{226:function(A,e,t){},227:function(A,e,t){},367:function(A,e,t){},368:function(A,e,t){},369:function(A,e,t){"use strict";t.r(e);var n=t(0),a=t.n(n),r=t(19),c=t.n(r),s=(t(226),t(227),t(20)),o=t(22),i=t(5),l=t(155),u=t(417),d=t(418),j=t(372),b=t(87),h=t(77),p=t(192),x=t.n(p),m=t(425),O=t(1),f=Object(l.a)((function(A){return{link:{fontSize:"1rem","&:hover":{color:"#CBC3E3"}},menuButton:{marginRight:A.spacing(2)},title:{flexGrow:1}}}));function g(A){var e=A.name,t=Object(m.a)(["session-token"]),n=Object(i.a)(t,3),a=(n[0],n[1],n[2]),r=Object(m.a)(["auth-token"]),c=Object(i.a)(r,3),o=(c[0],c[1],c[2]),l=f();return Object(O.jsx)(u.a,{position:"static",children:Object(O.jsxs)(d.a,{children:[Object(O.jsx)(s.b,{to:"/",className:l.link,children:Object(O.jsx)(b.a,{edge:"start",color:"inherit","aria-label":"menu",className:l.menuButton,children:Object(O.jsx)(x.a,{})})}),Object(O.jsx)(j.a,{variant:"h6",className:l.title,children:e}),Object(O.jsx)(h.a,{color:"inherit",onClick:function(){a("session-token"),o("auth-token"),localStorage.clear(),window.location.reload()},children:"Log out"})]})})}var v=t(419),y=t(420),w=t(424),N=Object(l.a)({page:{padding:"2% 10%"},root:{width:"48%",margin:"2%"},card:{minHeight:"150px","&:hover":{background:"#CBC3E3"}},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12},foot:{position:"absolute",bottom:"10px",left:"10px",textDecoration:"underline"}});function k(){var A=N();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(g,{name:"Home"}),Object(O.jsxs)("div",{className:A.page,children:[Object(O.jsx)(j.a,{component:"div",children:Object(O.jsx)(w.a,{fontSize:"h3.fontSize",textAlign:"center",children:"Welcome!"})}),Object(O.jsxs)(w.a,{children:[Object(O.jsx)(s.b,{to:"/posts",className:A.root,children:Object(O.jsx)(v.a,{className:A.card,children:Object(O.jsxs)(y.a,{children:[Object(O.jsx)(j.a,{variant:"h5",component:"h2",children:"Blog Posts"}),Object(O.jsx)("br",{}),Object(O.jsx)(j.a,{variant:"body2",component:"p",children:"Click here to view and edit all posts published to the LSE Law Review Blog."})]})})}),Object(O.jsx)(s.b,{to:"/authors",className:A.root,children:Object(O.jsx)(v.a,{className:A.card,children:Object(O.jsxs)(y.a,{children:[Object(O.jsx)(j.a,{variant:"h5",component:"h2",children:"Blog Authors"}),Object(O.jsx)("br",{}),Object(O.jsx)(j.a,{variant:"body2",component:"p",children:"Click here to view and edit the details of all contributors and editors of the LSE Law Review Blog."})]})})}),Object(O.jsx)(s.b,{to:"/converter",className:A.root,children:Object(O.jsx)(v.a,{className:A.card,children:Object(O.jsxs)(y.a,{children:[Object(O.jsx)(j.a,{variant:"h5",component:"h2",children:"Article Converter"}),Object(O.jsx)("br",{}),Object(O.jsx)(j.a,{variant:"body2",component:"p",children:"Click here to pair up references in a blog article."})]})})})]}),Object(O.jsx)(s.b,{to:"/visitors",children:Object(O.jsx)(j.a,{className:A.foot,variant:"body2",component:"p",children:"Visitors"})})]})]})}var C=t(15),E=t.n(C),S=t(12),D=t(24),T=t(70),F=Object(l.a)({div:{textAlign:"center",margin:"15px 0 15px 0"},link:{textDecoration:"underline",cursor:"pointer","&:hover":{color:"purple"}}});function R(){Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]);var A=F();return Object(O.jsx)("div",{className:A.div,children:Object(O.jsxs)(j.a,{variant:"h5",children:["WARNING: You are not logged in! Click ",Object(O.jsx)("span",{onClick:function(){window.location.reload()},className:A.link,children:"here"})," to log in again."]})})}var B="/api",P="https://blog.lselawreview.com";window.React=t(0);function M(){var A=Object(n.useState)([]),e=Object(i.a)(A,2),t=e[0],a=e[1],r=Object(n.useState)(!0),c=Object(i.a)(r,2),o=c[0],l=c[1],u=[{field:"title",headerName:"Title",flex:3,minWidth:150},{field:"_author",headerName:"Author",flex:1.5,minWidth:150,valueFormatter:function(A){return A.value.join(" & ")}},{field:"_categories",headerName:"Categories",flex:1.4,minWidth:150},{field:"date",headerName:"Date",flex:1.4,minWidth:140,valueFormatter:function(A){return function(A){var e=new Date(A),t=e.getDate(),n={0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"}[e.getMonth()],a=e.getFullYear();return"".concat(t," ").concat(n," ").concat(a)}(new Date(A.value))}},{field:"content",headerName:"Content",flex:3,minWidth:180},{field:"_id",sortable:!1,headerName:"\n",flex:.7,minWidth:80,renderCell:function(A){return Object(O.jsx)(s.b,{to:"/post/".concat(A.value),style:{margin:"auto"},children:Object(O.jsx)(h.a,{variant:"contained",color:"secondary",children:"Edit"})})}},{field:"url",sortable:!1,headerName:"\n",flex:1.5,minWidth:150,renderCell:function(A){return Object(O.jsx)("a",{href:A.value,style:{margin:"auto"},rel:"noopener noreferrer",target:"_blank",children:Object(O.jsx)(h.a,{variant:"contained",color:"primary",children:"View on blog"})})}}];return Object(n.useEffect)((function(){Object(D.a)(E.a.mark((function A(){var e,t,n;return E.a.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,fetch("".concat(B,"/posts"),{credentials:"include"});case 2:if(401!==(e=A.sent).status){A.next=6;break}return l(!1),A.abrupt("return");case 6:return A.next=8,e.json();case 8:t=A.sent,(n=t.map((function(A){var e;e=A.authors.length?A.authors:[A.author];var t=A.categories.join(" & "),n="".concat(P,"/").concat(new Date(A.date).getFullYear(),"/").concat(("0"+(new Date(A.date).getMonth()+1)).slice(-2),"/").concat(A.slug),a=A._id;return Object(S.a)(Object(S.a)({},A),{},{_author:e,url:n,id:a,_categories:t})}))).reverse(),a(n);case 12:case"end":return A.stop()}}),A)})))()}),[]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(g,{name:"All Posts"}),!o&&Object(O.jsx)(R,{}),Object(O.jsx)("div",{style:{margin:"20px",textAlign:"center"},children:Object(O.jsx)(s.b,{to:"/posts/add",children:Object(O.jsx)(h.a,{variant:"contained",color:"secondary",children:"Add Post"})})}),Object(O.jsx)(T.a,{autoHeight:!0,style:{width:"98%",margin:"auto"},sortingOrder:["asc","desc"],rows:t,columns:u})]})}var Y=t(10);function I(A,e){var t=Object(n.useState)((function(){try{var t=window.localStorage.getItem(A);return t?JSON.parse(t):e}catch(n){return console.log(n),e}})),a=Object(i.a)(t,2),r=a[0],c=a[1];return[r,function(e){try{var t=e instanceof Function?e(r):e;c(t),window.localStorage.setItem(A,JSON.stringify(t))}catch(n){console.log(n)}}]}var U=t(148),z=t(149),L=t(53),Q=t(116),H=t.p+"static/media/placeholder.0a8adf32.png",_={name:"",category:"",bio:""},J=Object(l.a)({page:{padding:"2% 10%"},input_long:{margin:"15px 5px",width:"100%"},button:{margin:"20px 10px",width:"10%"},link:{textDecoration:"underline",cursor:"pointer","&:hover":{color:"purple"}},image:{width:"30%",margin:"10px 0"},remove:{color:"red",fontSize:"1.2rem",cursor:"pointer",marginLeft:"5px",textDecoration:"underline","&:hover":{color:"purple"}}});function W(){var A=I("author",_),e=Object(i.a)(A,2),t=e[0],a=e[1],r=Object(n.useState)(""),c=Object(i.a)(r,2),o=c[0],l=c[1],u=Object(n.useState)(!0),d=Object(i.a)(u,2),b=d[0],p=d[1],x=Object(n.useState)(null),m=Object(i.a)(x,2),f=m[0],v=m[1],y=J(),w=function(A){return void 0!==A},N=function(A,e){a((function(t){return Object(S.a)(Object(S.a)({},t),{},Object(Y.a)({},e,A.target.value))}))},k=function(){var A=Object(D.a)(E.a.mark((function A(){var e,n,a,r;return E.a.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:if(t.name&&t.bio&&t.category){A.next=3;break}return l("Missing fields!"),A.abrupt("return");case 3:return l("Saving..."),(e=new FormData).append("image",f),e.append("name",t.name),e.append("bio",t.bio),e.append("category",t.category),A.next=11,fetch("".concat(B,"/authors"),{credentials:"include",method:"POST",body:e});case 11:if(401!==(n=A.sent).status){A.next=15;break}return p(!1),A.abrupt("return");case 15:if(200!==n.status){A.next=24;break}return A.next=18,n.json();case 18:a=A.sent,r=a._id,l(Object(O.jsxs)(O.Fragment,{children:["Author successfully added. Click ",Object(O.jsx)(s.b,{className:y.link,to:"/author/".concat(r),children:"here"})," to view."]})),C(),A.next=25;break;case 24:l("An error occurred! API returned with status ".concat(n.status,"."));case 25:case"end":return A.stop()}}),A)})));return function(){return A.apply(this,arguments)}}(),C=function(){a(_),v(null)};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(g,{name:"New Author"}),Object(O.jsxs)("div",{className:y.page,children:[!b&&Object(O.jsx)(R,{}),Object(O.jsx)(s.b,{to:"/authors",children:Object(O.jsx)(h.a,{variant:"outlined",color:"primary",children:"Back to all authors"})}),w(t.name)&&Object(O.jsx)("div",{children:Object(O.jsx)(U.a,{className:y.input_long,label:"Name",value:t.name,onChange:function(A){return N(A,"name")}})}),w(t.bio)&&Object(O.jsx)("div",{children:Object(O.jsx)(U.a,{className:y.input_long,label:"Bio",value:t.bio,onChange:function(A){return N(A,"bio")}})}),w(t.category)&&Object(O.jsxs)("div",{className:y.input_long,children:[Object(O.jsx)(z.a,{style:{fontSize:"0.8rem"},children:"Category"}),Object(O.jsxs)(Q.a,{value:t.category||"",onChange:function(A){return N(A,"category")},children:[Object(O.jsx)(L.a,{value:"editor",children:"Editor"}),Object(O.jsx)(L.a,{value:"contributor",children:"Contributor"})]})]}),w(f)&&Object(O.jsxs)("div",{children:[null===f?Object(O.jsx)("img",{className:y.image,src:H,alt:"placeholder"}):Object(O.jsx)("img",{className:y.image,src:f,onError:function(A){A.target.onerror=null,A.target.src=URL.createObjectURL(f)},alt:"avatar"}),Object(O.jsxs)("div",{children:[Object(O.jsx)("input",{className:y.input_long,type:"file",accept:".png,.jpg,.jpeg,.gif,.webp,.heif",onChange:function(A){return v(A.target.files[0])}}),null!==f&&Object(O.jsx)("span",{className:y.remove,onClick:function(){return v(null)},children:"Remove image"})]})]}),Object(O.jsx)(h.a,{className:y.button,variant:"contained",color:"primary",onClick:k,children:"Save"}),Object(O.jsx)(h.a,{className:y.button,variant:"contained",color:"secondary",onClick:C,children:"Clear"}),Object(O.jsx)(j.a,{children:o})]})]})}function V(){var A=Object(n.useState)([]),e=Object(i.a)(A,2),t=e[0],a=e[1],r=Object(n.useState)(!0),c=Object(i.a)(r,2),o=c[0],l=c[1];Object(n.useEffect)((function(){Object(D.a)(E.a.mark((function A(){var e,t,n;return E.a.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,fetch("".concat(B,"/authors"),{credentials:"include"});case 2:if(401!==(e=A.sent).status){A.next=6;break}return l(!1),A.abrupt("return");case 6:return A.next=8,e.json();case 8:t=A.sent,n=t.map((function(A){var e=A._id,t="".concat(P,"/author/").concat(A.name),n=A.image?"Yes":"No";return Object(S.a)(Object(S.a)({},A),{},{id:e,url:t,_image:n})})),a(n);case 11:case"end":return A.stop()}}),A)})))()}),[]);var u=[{field:"name",headerName:"Name",flex:1.8,minWidth:150},{field:"category",headerName:"Category",flex:1.4,minWidth:150,valueFormatter:function(A){return A.value.charAt(0).toUpperCase()+A.value.slice(1)}},{field:"bio",headerName:"Bio",flex:5,minWidth:150},{field:"_image",headerName:"Has avatar?",flex:1.3,minWidth:150},{field:"_id",sortable:!1,headerName:"\n",flex:.7,minWidth:80,renderCell:function(A){return Object(O.jsx)(s.b,{style:{margin:"auto"},to:"/author/".concat(A.value),children:Object(O.jsx)(h.a,{variant:"contained",color:"secondary",children:"Edit"})})}},{field:"url",sortable:!1,headerName:"\n",flex:1.5,minWidth:150,renderCell:function(A){return Object(O.jsx)("a",{href:A.value,style:{margin:"auto"},rel:"noopener noreferrer",target:"_blank",children:Object(O.jsx)(h.a,{variant:"contained",color:"primary",children:"View on blog"})})}}];return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(g,{name:"All Authors"}),Object(O.jsxs)("div",{style:{margin:"20px",textAlign:"center"},children:[!o&&Object(O.jsx)(R,{}),Object(O.jsx)(s.b,{to:"/authors/add",children:Object(O.jsx)(h.a,{variant:"contained",color:"secondary",children:"Add Author"})})]}),Object(O.jsx)(T.a,{autoHeight:!0,style:{width:"98%",margin:"auto"},sortingOrder:["asc","desc"],rows:t,columns:u})]})}var G=t(16),q=t(143),K=t.n(q),Z=t(144),X=t(194),$=t.n(X),AA=t(195),eA=t.n(AA),tA=t.p+"static/media/time.416a61b0.svg",nA=Object(l.a)({modal:{position:"sticky",top:0,left:0,width:"100vw",backgroundColor:"white",padding:"2% 0",minHeight:"100vh",margin:0,zIndex:999,textAlign:"right"},button:{position:"sticky",top:"15px",right:"20px"},image:{width:"60%",marginTop:"15px"},caption:{marginRight:"20%",textAlign:"right",color:"grey",fontSize:"1rem"}});function aA(A){var e=A.setIsOpen,t=A.isOpen,n=A.post,a=A.image,r=A.caption,c=nA();return Object(O.jsx)(O.Fragment,{children:t&&Object(O.jsxs)("div",{className:c.modal,children:[Object(O.jsx)(h.a,{className:c.button,variant:"contained",color:"secondary",onClick:function(){return e(!1)},children:"Close"}),Object(O.jsxs)("div",{className:"post-container",children:[0!==n.authors.length&&Object(O.jsx)("span",{className:"post-author",children:n.authors.map((function(A,e){return Object(O.jsxs)("span",{children:[Object(O.jsx)("span",{children:A}),e+1!==n.authors.length&&Object(O.jsx)("span",{children:" & "})]},A)}))}),Object(O.jsx)("span",{children:" - "}),Object(O.jsx)("span",{children:n.categories.map((function(A,e){return Object(O.jsxs)("span",{children:[Object(O.jsx)("span",{children:A}),e+1!==n.categories.length&&Object(O.jsx)("span",{children:" & "})]},A)}))}),Object(O.jsx)("div",{className:"post-title",children:Object(O.jsx)(K.a,{rehypePlugins:[Z.a],children:n.title})}),Object(O.jsxs)("div",{className:"post-meta",children:[Object(O.jsx)("span",{className:"post-date",children:function(A){var e=new Date(A),t=e.getDate(),n={0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"}[e.getMonth()],a=e.getFullYear();return"".concat(t," ").concat(n," ").concat(a)}(n.date)}),Object(O.jsxs)("span",{className:"post-time",children:[Object(O.jsx)("img",{src:tA,alt:"time"}),Math.ceil(eA()($()(n.content).split("[1]")[0],{wordsPerMinute:250}).minutes)," min read"]})]}),a&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("img",{className:c.image,src:a,onError:function(A){A.target.onerror=null,A.target.src=URL.createObjectURL(a)},alt:"avatar"}),Object(O.jsx)("div",{className:c.caption,children:r||""})]}),Object(O.jsx)("div",{className:"page-content",children:Object(O.jsx)(K.a,{rehypePlugins:[Z.a],children:n.content})})]})]})})}var rA=t(85),cA=t.n(rA),sA=t(86),oA=t.n(sA),iA="data:image/jpeg;base64,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AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB//2Q==",lA=t(82),uA={title:"",author:"",authors:[],categories:[],visits:0,content:"",date:Date.now()},dA=Object(l.a)({page:{padding:"2% 10%"},input_long:{margin:"15px 5px",width:"100%"},input:{margin:"15px 5px",width:"max(20%,200px)"},icon:{position:"absolute",width:"40px",transform:"translate(-40px,33px)",cursor:"pointer","&:hover":{color:"purple"}},button:{margin:"20px 10px",width:"10%"},textarea:{margin:"5px",width:"100%",maxHeight:"300px",overflow:"scroll","&:hover":{maxHeight:"unset"}},link:{textDecoration:"underline",cursor:"pointer","&:hover":{color:"purple"}},image:{width:"40%",margin:"10px 0"},remove:{color:"red",fontSize:"1.2rem",cursor:"pointer",marginLeft:"5px",textDecoration:"underline","&:hover":{color:"purple"}}});function jA(){var A=I("post",uA),e=Object(i.a)(A,2),t=e[0],a=e[1],r=I("n-a",""),c=Object(i.a)(r,2),o=c[0],l=c[1],u=I("n-c",""),d=Object(i.a)(u,2),b=d[0],p=d[1],x=Object(n.useState)(null),m=Object(i.a)(x,2),f=m[0],v=m[1],y=Object(n.useState)(""),w=Object(i.a)(y,2),N=w[0],k=w[1],C=Object(n.useState)(""),T=Object(i.a)(C,2),F=T[0],P=T[1],M=Object(n.useState)(!1),z=Object(i.a)(M,2),L=z[0],Q=z[1],H=Object(n.useState)(!0),_=Object(i.a)(H,2),J=_[0],W=_[1],V=dA(),q=Object(n.useRef)(null),K=Object(n.useRef)(null),Z=function(A){return void 0!==A},X=function(A,e){a((function(t){return Object(S.a)(Object(S.a)({},t),{},Object(Y.a)({},e,A.target.value))}))},$=function(A,e,t){a((function(n){var a=n[e].map((function(e,n){return n===t?A.target.value:e}));return console.log(n),Object(S.a)(Object(S.a)({},n),{},Object(Y.a)({},e,a))}))},AA=function(A,e){A&&a((function(t){var n=Object(G.a)(t[e]);return n.push(A),Object(S.a)(Object(S.a)({},t),{},Object(Y.a)({},e,n))}))},eA=function(A,e){a((function(t){var n=Object(G.a)(t[e]);return n.splice(A,1),Object(S.a)(Object(S.a)({},t),{},Object(Y.a)({},e,n))}))},tA=function(){a(uA),l(""),v(null)},nA=function(){var A=Object(D.a)(E.a.mark((function A(){var e,n,a,r,c,o,i;return E.a.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:if(t.title&&t.date&&t.authors.length&&t.categories.length&&t.content){A.next=3;break}return P("Missing fields!"),A.abrupt("return");case 3:if(!(t.visits<0||t.visits%1)){A.next=6;break}return P("The number of visits must be a non-negative integer!"),A.abrupt("return");case 6:return P("Saving..."),(e=new FormData).append("title",t.title),e.append("categories",JSON.stringify(t.categories)),e.append("date",t.date),e.append("content",t.content),t.authors.length>1?e.append("authors",JSON.stringify(t.authors)):e.append("author",t.authors[0]),A.next=15,fetch("".concat(B,"/posts"),{credentials:"include",method:"POST",body:e});case 15:if(401!==(n=A.sent).status){A.next=19;break}return W(!1),A.abrupt("return");case 19:if(200===n.status){A.next=22;break}return P("An error occurred! API returned with status ".concat(n.status)),A.abrupt("return");case 22:return A.next=24,n.json();case 24:return a=A.sent,(r=new FormData).append("image",f),r.append("caption",N),A.next=30,fetch("".concat(B,"/images/").concat(a.slug),{credentials:"include",method:"POST",body:r});case 30:return A.next=32,fetch("".concat(B,"/visits/").concat(a.slug),{credentials:"include"});case 32:if(401!==(c=A.sent).status){A.next=36;break}return W(!1),A.abrupt("return");case 36:if(200===c.status){A.next=46;break}return A.next=39,fetch("".concat(B,"/visits/").concat(a.slug),{credentials:"include",method:"POST"});case 39:if(401!==(o=A.sent).status){A.next=43;break}return W(!1),A.abrupt("return");case 43:if(200===o.status){A.next=46;break}return P("An error occurred! API returned with status ".concat(o.status)),A.abrupt("return");case 46:return A.next=48,fetch("".concat(B,"/visits/").concat(a.slug),{credentials:"include",method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify({type:"set",value:t.visits})});case 48:if(401!==(i=A.sent).status){A.next=52;break}return W(!1),A.abrupt("return");case 52:if(200===i.status){A.next=55;break}return P("An error occurred! API returned with status ".concat(i.status)),A.abrupt("return");case 55:P(Object(O.jsxs)(O.Fragment,{children:["Post successfully added. Click ",Object(O.jsx)(s.b,{className:V.link,to:"/post/".concat(a._id),children:"here"})," to view."]})),tA();case 57:case"end":return A.stop()}}),A)})));return function(){return A.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(g,{name:"New Post"}),Object(O.jsx)(aA,{setIsOpen:Q,isOpen:L,post:t,image:f&&f,caption:f&&N}),Object(O.jsxs)("div",{className:V.page,children:[!J&&Object(O.jsx)(R,{}),Object(O.jsx)(s.b,{to:"/posts",children:Object(O.jsx)(h.a,{variant:"outlined",color:"primary",children:"Back to all posts"})}),Z(t.title)&&Object(O.jsx)("div",{children:Object(O.jsx)(U.a,{className:V.input_long,label:"Title",value:t.title,onChange:function(A){return X(A,"title")}})}),Z(t.date)&&Object(O.jsx)("div",{children:Object(O.jsx)(U.a,{className:V.input_long,label:"Date",type:"date",value:new Date(t.date||0).toISOString().substr(0,10),onChange:function(A){return X(A,"date")}})}),Z(t.categories)&&Object(O.jsxs)("div",{children:[t.categories.map((function(A,e){return Object(O.jsxs)("span",{children:[Object(O.jsx)(U.a,{className:V.input,label:"Category",value:A,onChange:function(A){return $(A,"categories",e)}}),Object(O.jsx)(cA.a,{style:{color:"darkred"},className:V.icon,onClick:function(){return eA(e,"categories")}})]},e)})),Object(O.jsx)(U.a,{className:V.input,label:"New Category",value:b,onChange:function(A){return p(A.target.value)}}),Object(O.jsx)(oA.a,{style:{color:"green"},className:V.icon,onClick:function(){AA(b,"categories"),p("")}})]}),Z(t.authors)&&Object(O.jsxs)("div",{children:[t.authors.map((function(A,e){return Object(O.jsxs)("span",{children:[Object(O.jsx)(U.a,{className:V.input,label:"Author",value:A,onChange:function(A){return $(A,"authors",e)}}),Object(O.jsx)(cA.a,{style:{color:"darkred"},className:V.icon,onClick:function(){return eA(e,"authors")}})]},e)})),Object(O.jsx)(U.a,{className:V.input,label:"New Author",value:o,onChange:function(A){return l(A.target.value)}}),Object(O.jsx)(oA.a,{style:{color:"green"},className:V.icon,onClick:function(){AA(o,"authors"),l("")}})]}),Z(t.visits)&&Object(O.jsx)("div",{children:Object(O.jsx)(U.a,{className:V.input_long,label:"Views",type:"number",value:t.visits,onChange:function(A){return X(A,"visits")}})}),Z(f)&&Object(O.jsxs)("div",{children:[null===f?Object(O.jsx)("img",{className:V.image,src:iA,alt:"placeholder"}):Object(O.jsx)("img",{className:V.image,src:f,onError:function(A){A.target.onerror=null,A.target.src=URL.createObjectURL(f)},alt:"avatar"}),Object(O.jsxs)("div",{children:[Object(O.jsx)("input",{className:V.input_long,type:"file",accept:".png,.jpg,.jpeg,.gif,.webp,.heif",onChange:function(A){return v(A.target.files[0])}}),null!==f&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("span",{className:V.remove,onClick:function(){return v(null)},children:"Remove image"}),Object(O.jsx)(U.a,{className:V.input_long,label:"Caption",value:N||"",onChange:function(A){return k(A.target.value)}})]})]})]}),Z(t.content)&&Object(O.jsx)("div",{children:Object(O.jsx)(U.a,{inputRef:K,onPaste:function(A){var e=K.current.selectionStart,n=K.current.selectionEnd;q.current.focus(),setTimeout((function(){var A=q.current.innerHTML;q.current.innerHTML="";var r=(new lA.a).turndown(A),c="".concat(t.content.substring(0,e)).concat(r).concat(t.content.substring(n)).replace(/\\/g,"");K.current.focus(),a((function(A){return Object(S.a)(Object(S.a)({},A),{},{content:c})})),K.current.selectionEnd=n+r.length}),[])},className:V.textarea,multiline:!0,label:"Content",value:t.content||"",onChange:function(A){return X(A,"content")}})}),Object(O.jsx)(h.a,{className:V.button,variant:"contained",color:"primary",onClick:nA,children:"Save"}),Object(O.jsx)(h.a,{className:V.button,variant:"contained",onClick:function(){Q(!0),window.scrollTo(0,0)},children:"Preview"}),Object(O.jsx)(h.a,{className:V.button,variant:"contained",color:"secondary",onClick:tA,children:"Clear"}),Object(O.jsx)(j.a,{children:F}),Object(O.jsx)("div",{contentEditable:!0,ref:q,style:{opacity:0,position:"fixed"}})]})]})}var bA=Object(l.a)({page:{padding:"2% 10%"},input_long:{margin:"15px 5px",width:"100%"},input:{margin:"15px 5px",width:"max(20%,200px)"},icon:{position:"absolute",width:"40px",transform:"translate(-40px,33px)",cursor:"pointer","&:hover":{color:"purple"}},button:{margin:"20px 10px",width:"10%"},textarea:{margin:"10px 5px",width:"100%",maxHeight:"300px",overflow:"scroll","&:hover":{maxHeight:"unset"}},link:{textDecoration:"underline",cursor:"pointer","&:hover":{color:"purple"}},image:{width:"40%",margin:"10px 0"},remove:{color:"red",fontSize:"1.2rem",cursor:"pointer",marginLeft:"5px",textDecoration:"underline","&:hover":{color:"purple"}}});function hA(A){var e=A.match,t=A.history,a=I("post_".concat(e.params.id),{}),r=Object(i.a)(a,2),c=r[0],o=r[1],l=I("modified_".concat(e.params.id),!1),u=Object(i.a)(l,2),d=u[0],b=u[1],p=I("n-a_".concat(e.params.id),""),x=Object(i.a)(p,2),m=x[0],f=x[1],v=I("n-c_".concat(e.params.id),""),y=Object(i.a)(v,2),w=y[0],N=y[1],k=Object(n.useState)(iA),C=Object(i.a)(k,2),T=C[0],F=C[1],P=Object(n.useState)(""),M=Object(i.a)(P,2),z=M[0],L=M[1],Q=Object(n.useState)(!1),H=Object(i.a)(Q,2),_=H[0],J=H[1],W=Object(n.useState)(""),V=Object(i.a)(W,2),q=V[0],K=V[1],Z=Object(n.useState)(!1),X=Object(i.a)(Z,2),$=X[0],AA=X[1],eA=Object(n.useState)(!0),tA=Object(i.a)(eA,2),nA=tA[0],rA=tA[1],sA=bA(),uA=Object(n.useRef)(null),dA=Object(n.useRef)(null);Object(n.useEffect)((function(){d||Object(D.a)(E.a.mark((function A(){var n,a,r,c;return E.a.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,fetch("".concat(B,"/post/id/").concat(e.params.id),{credentials:"include"});case 2:if(401!==(n=A.sent).status){A.next=6;break}return rA(!1),A.abrupt("return");case 6:return 404===n.status&&t.push("/404"),A.next=9,n.json();case 9:return a=A.sent,A.next=12,fetch("".concat(B,"/visits/").concat(a.slug),{credentials:"include"});case 12:if(401!==(r=A.sent).status){A.next=16;break}return rA(!1),A.abrupt("return");case 16:return A.next=18,r.json();case 18:c=A.sent,a.author&&(a.authors=[a.author]),o(Object(S.a)(Object(S.a)({},a),{},{visits:c.visits}));case 21:case"end":return A.stop()}}),A)})))()}),[e.params.id,d]),Object(n.useEffect)((function(){Object(D.a)(E.a.mark((function A(){var e,t,n,a;return E.a.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,fetch("".concat(B,"/images/").concat(c.slug),{credentials:"include"});case 2:if(e=A.sent,console.log(e),200===e.status){A.next=8;break}F(iA),A.next=16;break;case 8:return A.next=10,e.json();case 10:t=A.sent,n=t.url,a=t.caption,console.log(n,a),L(a),T?(J(!0),F(n)):F(iA);case 16:case"end":return A.stop()}}),A)})))()}),[c.slug]);var jA=function(A){return void 0!==A},hA=function(A,e){b(!0),o((function(t){return Object(S.a)(Object(S.a)({},t),{},Object(Y.a)({},e,A.target.value))}))},pA=function(A,e,t){b(!0),o((function(n){var a=n[e].map((function(e,n){return n===t?A.target.value:e}));return Object(S.a)(Object(S.a)({},n),{},Object(Y.a)({},e,a))}))},xA=function(A,e){A&&(b(!0),o((function(t){var n=Object(G.a)(t[e]);return n.push(A),Object(S.a)(Object(S.a)({},t),{},Object(Y.a)({},e,n))})))},mA=function(A,e){b(!0),o((function(t){var n=Object(G.a)(t[e]);return n.splice(A,1),Object(S.a)(Object(S.a)({},t),{},Object(Y.a)({},e,n))}))},OA=function(){var A=Object(D.a)(E.a.mark((function A(){var e,t,n,a,r,s;return E.a.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:if(c.title&&c.date&&c.authors.length&&c.categories.length&&c.content){A.next=3;break}return K("Missing fields!"),A.abrupt("return");case 3:if(!(c.visits<0||c.visits%1)){A.next=6;break}return K("The number of visits must be a non-negative integer!"),A.abrupt("return");case 6:return K("Saving..."),(e=new FormData).append("title",c.title),e.append("categories",JSON.stringify(c.categories)),e.append("date",c.date),e.append("content",c.content),c.authors.length>1?e.append("authors",JSON.stringify(c.authors)):e.append("author",c.authors[0]),A.next=15,fetch("".concat(B,"/posts/").concat(c._id),{credentials:"include",method:"PATCH",body:e});case 15:if(401!==(t=A.sent).status){A.next=19;break}return rA(!1),A.abrupt("return");case 19:if(200===t.status){A.next=22;break}return K("An error occurred! API returned with status ".concat(t.status)),A.abrupt("return");case 22:return A.next=24,fetch("".concat(B,"/visits/").concat(c.slug),{credentials:"include",method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify({type:"set",value:c.visits})});case 24:if(401!==(n=A.sent).status){A.next=28;break}return rA(!1),A.abrupt("return");case 28:if(200===n.status){A.next=31;break}return K("An error occurred! API returned with status ".concat(n.status)),A.abrupt("return");case 31:if("object"!=typeof T||null===T){A.next=43;break}return(a=new FormData).append("image",T),a.append("caption",z),A.next=37,fetch("".concat(B,"/images/").concat(c.slug),{credentials:"include",method:"PATCH",body:a});case 37:if(200===(r=A.sent).status){A.next=41;break}return K("An error occurred! API returned with status ".concat(r.status)),A.abrupt("return");case 41:A.next=52;break;case 43:if(null!==T){A.next=48;break}return A.next=46,fetch("".concat(B,"/images/").concat(c.slug),{credentials:"include",method:"DELETE"});case 46:A.next=52;break;case 48:return(s=new FormData).append("caption",z),A.next=52,fetch("".concat(B,"/images/").concat(c.slug),{credentials:"include",method:"PATCH",body:s});case 52:K(Object(O.jsxs)(O.Fragment,{children:["Post successfully saved. ",Object(O.jsx)("span",{className:sA.link,onClick:function(){b(!1),window.location.reload()},children:"Refresh"})," the page to see."]}));case 53:case"end":return A.stop()}}),A)})));return function(){return A.apply(this,arguments)}}(),fA=function(){var A=Object(D.a)(E.a.mark((function A(){var t;return E.a.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:if(!1!==window.confirm("Are you sure you want to delete the post ".concat(c.title,"? This cannot be undone."))){A.next=3;break}return A.abrupt("return");case 3:return K("Deleting..."),A.next=6,fetch("".concat(B,"/posts/").concat(c._id),{credentials:"include",method:"DELETE"});case 6:if(401!==(t=A.sent).status){A.next=10;break}return rA(!1),A.abrupt("return");case 10:204===t.status?(K(Object(O.jsxs)(O.Fragment,{children:["Post successfully deleted. Go back to all posts ",Object(O.jsx)(s.b,{className:sA.link,to:"/posts",children:"here"}),". "]})),localStorage.removeItem("post_".concat(e.params.id)),localStorage.removeItem("modified_".concat(e.params.id)),localStorage.removeItem("n-a_".concat(e.params.id)),localStorage.removeItem("n-c_".concat(e.params.id))):K("An error occurred! API returned with status ".concat(t.status,"."));case 11:case"end":return A.stop()}}),A)})));return function(){return A.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(g,{name:c.title}),Object(O.jsx)(aA,{setIsOpen:AA,isOpen:$,post:c,image:_&&T,caption:_&&z}),Object(O.jsxs)("div",{className:sA.page,children:[!nA&&Object(O.jsx)(R,{}),Object(O.jsx)(s.b,{to:"/posts",children:Object(O.jsx)(h.a,{variant:"outlined",color:"primary",children:"Back to all posts"})}),jA(c.title)&&Object(O.jsx)("div",{children:Object(O.jsx)(U.a,{className:sA.input_long,label:"Title",value:c.title,onChange:function(A){return hA(A,"title")}})}),jA(c.date)&&Object(O.jsx)("div",{children:Object(O.jsx)(U.a,{className:sA.input_long,label:"Date",type:"date",value:new Date(c.date||0).toISOString().substr(0,10),onChange:function(A){return hA(A,"date")}})}),jA(c.categories)&&Object(O.jsxs)("div",{children:[c.categories.map((function(A,e){return Object(O.jsxs)("span",{children:[Object(O.jsx)(U.a,{className:sA.input,label:"Category",value:A,onChange:function(A){return pA(A,"categories",e)}}),Object(O.jsx)(cA.a,{style:{color:"darkred"},className:sA.icon,onClick:function(){return mA(e,"categories")}})]},e)})),Object(O.jsx)(U.a,{className:sA.input,label:"New Category",value:w,onChange:function(A){return N(A.target.value)}}),Object(O.jsx)(oA.a,{style:{color:"green"},className:sA.icon,onClick:function(){xA(w,"categories"),N("")}})]}),jA(c.authors)&&Object(O.jsxs)("div",{children:[c.authors.map((function(A,e){return Object(O.jsxs)("span",{children:[Object(O.jsx)(U.a,{className:sA.input,label:"Author",value:A,onChange:function(A){return pA(A,"authors",e)}}),Object(O.jsx)(cA.a,{style:{color:"darkred"},className:sA.icon,onClick:function(){return mA(e,"authors")}})]},e)})),Object(O.jsx)(U.a,{className:sA.input,label:"New Author",value:m,onChange:function(A){return f(A.target.value)}}),Object(O.jsx)(oA.a,{style:{color:"green"},className:sA.icon,onClick:function(){xA(m,"authors"),f("")}})]}),jA(c.visits)&&Object(O.jsx)("div",{children:Object(O.jsx)(U.a,{className:sA.input_long,label:"Views",type:"number",value:c.visits,onChange:function(A){return hA(A,"visits")}})}),jA(T)&&Object(O.jsxs)("div",{children:[null===T?Object(O.jsx)("img",{className:sA.image,src:iA,alt:"placeholder"}):Object(O.jsx)("img",{className:sA.image,src:T,onError:function(A){A.target.onerror=null,A.target.src=URL.createObjectURL(T)},alt:"avatar"}),Object(O.jsxs)("div",{children:[Object(O.jsx)("input",{className:sA.input_long,type:"file",accept:".png,.jpg,.jpeg,.gif,.webp,.heif",onChange:function(A){b(!0),J(!0),F(A.target.files[0])}}),_&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("span",{className:sA.remove,onClick:function(){J(!1),F(null)},children:"Remove image"}),Object(O.jsx)(U.a,{className:sA.input_long,label:"Caption",value:z||"",onChange:function(A){return L(A.target.value)}})]})]})]}),jA(c.content)&&Object(O.jsx)("div",{children:Object(O.jsx)(U.a,{inputRef:dA,onPaste:function(A){b(!0);var e=dA.current.selectionStart,t=dA.current.selectionEnd;uA.current.focus(),setTimeout((function(){var A=uA.current.innerHTML;uA.current.innerHTML="";var n=(new lA.a).turndown(A),a="".concat(c.content.substring(0,e)).concat(n).concat(c.content.substring(t)).replace(/\\/g,"");dA.current.focus(),o((function(A){return Object(S.a)(Object(S.a)({},A),{},{content:a})})),dA.current.selectionEnd=t+n.length}),0)},className:sA.textarea,multiline:!0,label:"Content",value:c.content||"",onChange:function(A){return hA(A,"content")}})}),Object(O.jsx)(h.a,{className:sA.button,variant:"contained",color:"primary",onClick:OA,children:"Save"}),Object(O.jsx)(h.a,{className:sA.button,variant:"contained",color:"secondary",onClick:fA,children:"Delete"}),Object(O.jsx)(h.a,{className:sA.button,variant:"contained",onClick:function(){AA(!0),window.scrollTo(0,0)},children:"Preview"}),Object(O.jsx)(h.a,{className:sA.button,variant:"contained",color:"secondary",onClick:function(){b(!1)},children:"Reset"}),Object(O.jsx)(j.a,{children:q}),Object(O.jsx)("div",{contentEditable:!0,ref:uA,style:{opacity:0,position:"fixed",top:0}})]})]})}var pA=Object(l.a)({page:{padding:"2% 10%"},input_long:{margin:"15px 5px",width:"100%"},button:{margin:"20px 10px",width:"10%"},link:{textDecoration:"underline",cursor:"pointer","&:hover":{color:"purple"}},image:{width:"30%",margin:"10px 0"},remove:{color:"red",fontSize:"1.2rem",cursor:"pointer",marginLeft:"5px",textDecoration:"underline","&:hover":{color:"purple"}}});function xA(A){var e=A.match,t=A.history,a=I("author_".concat(e.params.id),{}),r=Object(i.a)(a,2),c=r[0],o=r[1],l=Object(n.useState)(),u=Object(i.a)(l,2),d=u[0],b=u[1],p=I("modified_".concat(e.params.id),!1),x=Object(i.a)(p,2),m=x[0],f=x[1],v=Object(n.useState)(""),y=Object(i.a)(v,2),w=y[0],N=y[1],k=Object(n.useState)(!0),C=Object(i.a)(k,2),T=C[0],F=C[1],P=pA();Object(n.useEffect)((function(){m||Object(D.a)(E.a.mark((function A(){var n,a;return E.a.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,fetch("".concat(B,"/authors/").concat(e.params.id),{credentials:"include"});case 2:if(401!==(n=A.sent).status){A.next=6;break}return F(!1),A.abrupt("return");case 6:return 404===n.status&&t.push("/404"),A.next=9,n.json();case 9:(a=A.sent).image?b(a.image):b(null),o(a);case 12:case"end":return A.stop()}}),A)})))()}),[m]);var M=function(A){return void 0!==A},_=function(A,e){f(!0),o((function(t){return Object(S.a)(Object(S.a)({},t),{},Object(Y.a)({},e,A.target.value))}))},J=function(){var A=Object(D.a)(E.a.mark((function A(){var e,t;return E.a.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:if(c.name&&c.bio&&c.category){A.next=3;break}return N("Missing fields!"),A.abrupt("return");case 3:return N("Saving..."),(e=new FormData).append("image",d),e.append("name",c.name),e.append("bio",c.bio),e.append("category",c.category),A.next=11,fetch("".concat(B,"/authors/").concat(c._id),{credentials:"include",method:"PATCH",body:e});case 11:if(401!==(t=A.sent).status){A.next=15;break}return F(!1),A.abrupt("return");case 15:200===t.status?(f(!1),N(Object(O.jsxs)(O.Fragment,{children:["Author successfully edited. ",Object(O.jsx)("span",{className:P.link,onClick:function(){f(!1),window.location.reload()},children:"Refresh"})," the page to see."]}))):N("An error occurred! API returned with status ".concat(t.status,"."));case 16:case"end":return A.stop()}}),A)})));return function(){return A.apply(this,arguments)}}(),W=function(){var A=Object(D.a)(E.a.mark((function A(){var t;return E.a.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:if(!1!==window.confirm("Are you sure you want to delete the author ".concat(c.name,"? This cannot be undone."))){A.next=3;break}return A.abrupt("return");case 3:return N("Deleting..."),A.next=6,fetch("".concat(B,"/authors/").concat(c._id),{credentials:"include",method:"DELETE"});case 6:if(401!==(t=A.sent).status){A.next=10;break}return F(!1),A.abrupt("return");case 10:204===t.status?(N(Object(O.jsxs)(O.Fragment,{children:["Author successfully deleted. Go back to all authors ",Object(O.jsx)(s.b,{className:P.link,to:"/authors",children:"here"}),"."]})),localStorage.removeItem("author_".concat(e.params.id)),localStorage.removeItem("image_".concat(e.params.id)),localStorage.removeItem("modified_".concat(e.params.id))):N("An error occurred! API returned with status ".concat(t.status,"."));case 11:case"end":return A.stop()}}),A)})));return function(){return A.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(g,{name:c.name}),Object(O.jsxs)("div",{className:P.page,children:[!T&&Object(O.jsx)(R,{}),Object(O.jsx)(s.b,{to:"/authors",children:Object(O.jsx)(h.a,{variant:"outlined",color:"primary",children:"Back to all authors"})}),M(c.name)&&Object(O.jsx)("div",{children:Object(O.jsx)(U.a,{className:P.input_long,label:"Name",value:c.name,onChange:function(A){return _(A,"name")}})}),M(c.bio)&&Object(O.jsx)("div",{children:Object(O.jsx)(U.a,{className:P.input_long,label:"Bio",value:c.bio||"",onChange:function(A){return _(A,"bio")}})}),M(c.category||"")&&Object(O.jsxs)("div",{className:P.input_long,children:[Object(O.jsx)(z.a,{style:{fontSize:"0.8rem"},children:"Category"}),Object(O.jsxs)(Q.a,{value:c.category,onChange:function(A){return _(A,"category")},children:[Object(O.jsx)(L.a,{value:"editor",children:"Editor"}),Object(O.jsx)(L.a,{value:"contributor",children:"Contributor"})]})]}),Object(O.jsxs)("div",{children:[d?Object(O.jsx)("img",{className:P.image,src:d,onError:function(A){A.target.onerror=null,A.target.src=URL.createObjectURL(d)},alt:"avatar"}):Object(O.jsx)("img",{className:P.image,src:H,alt:"placeholder"}),Object(O.jsxs)("div",{children:[Object(O.jsx)("input",{className:P.input_long,type:"file",accept:".png,.jpg,.jpeg,.gif,.webp,.heif",onChange:function(A){f(!0),b(A.target.files[0])}}),d&&Object(O.jsx)("span",{className:P.remove,onClick:function(){f(!0),b(null)},children:"Remove image"})]})]}),Object(O.jsx)(h.a,{className:P.button,variant:"contained",color:"primary",onClick:J,children:"Save"}),Object(O.jsx)(h.a,{className:P.button,variant:"contained",color:"secondary",onClick:W,children:"Delete"}),Object(O.jsx)(h.a,{className:P.button,variant:"contained",color:"secondary",onClick:function(){f(!1)},children:"Reset"}),Object(O.jsx)(j.a,{children:w})]})]})}function mA(A){var e=A.history;return Object(n.useEffect)((function(){setTimeout((function(){e.push("/")}),1500)}),[e]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(g,{name:"Error 404"}),Object(O.jsx)(j.a,{style:{textAlign:"center",margin:"20px"},variant:"h4",children:"The page that you were looking for does not exist. Redirecting you to the home page..."})]})}var OA=Object(o.f)((function(A){var e=A.history;return Object(n.useEffect)((function(){var A=e.listen((function(){window.scrollTo(0,0)}));return function(){A()}}),[]),null})),fA=Object(l.a)({title:{margin:"20px",textAlign:"center"}});function gA(A){var e=A.history,t=fA(),a=Object(n.useState)([]),r=Object(i.a)(a,2),c=r[0],s=r[1],o=Object(n.useState)([]),l=Object(i.a)(o,2),u=l[0],d=l[1],b=Object(n.useState)([]),h=Object(i.a)(b,2),p=h[0],x=h[1],m=Object(n.useState)(!1),f=Object(i.a)(m,2),v=f[0],y=f[1],w=[{field:"time",headerName:"Time",flex:5,minWidth:"200px",valueFormatter:function(A){return new Date(A.value)}},{field:"location",headerName:"Country",flex:2,minWidth:"200px"},{field:"entry",headerName:"Entry point",flex:5,minWidth:"200px"}];return Object(n.useEffect)((function(){Object(D.a)(E.a.mark((function A(){var e,t,n,a,r,c,o,i;return E.a.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return e=window.prompt("Please enter the access code to view this page!"),A.next=3,fetch("".concat(B,"/visits/visitors?pw=").concat(e),{credentials:"include"});case 3:if(200===(t=A.sent).status){A.next=7;break}return y(!0),A.abrupt("return");case 7:return A.next=9,t.json();case 9:n=A.sent,a=n.map((function(A){return Object(S.a)(Object(S.a)({},A),{},{id:A._id,entry:A.entry||"N/A"})})),s(a.reverse()),r={},n.forEach((function(A){r[A.location]=r[A.location]?++r[A.location]:1})),c=[],Object.keys(r).forEach((function(A,e){c.push({id:e,country:A,value:r[A]})})),d(c.sort((function(A,e){return A.value>e.value?-1:A.value<e.value?1:0}))),o={},n.forEach((function(A){A.entry&&A.entry.split("blog.lselawreview.com").length>1&&(o[A.entry.slice(29)]=o[A.entry.slice(29)]?++o[A.entry.slice(29)]:1)})),i=[],Object.keys(o).forEach((function(A,e){i.push({id:e,entry:A,value:o[A]})})),x(i.sort((function(A,e){return A.value>e.value?-1:A.value<e.value?1:0})));case 22:case"end":return A.stop()}}),A)})))()}),[]),v&&e.push("/"),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(g,{name:"Visitors"}),Object(O.jsx)(j.a,{variant:"h4",className:t.title,children:"Top countries"}),Object(O.jsx)(T.a,{autoHeight:!0,style:{width:"98%",margin:"10px auto"},sortingOrder:["asc","desc"],rows:u,columns:[{field:"country",headerName:"Country",flex:5,minWidth:"200px"},{field:"value",headerName:"Value",flex:2,minWidth:"100px"}]}),Object(O.jsx)(j.a,{variant:"h4",className:t.title,children:"Top entry points"}),Object(O.jsx)(T.a,{autoHeight:!0,style:{width:"98%",margin:"10px auto"},sortingOrder:["asc","desc"],rows:p,columns:[{field:"entry",headerName:"Entry point",flex:5,minWidth:"200px"},{field:"value",headerName:"Value",flex:2,minWidth:"100px"}]}),Object(O.jsx)(j.a,{variant:"h4",className:t.title,children:"All visitors"}),Object(O.jsx)(T.a,{autoHeight:!0,style:{width:"98%",margin:"10px auto"},sortingOrder:["asc","desc"],rows:c,columns:w})]})}var vA=t(114),yA=Object(l.a)({page:{padding:"2% 10%"},reset:{backgroundColor:vA.a,"&:hover":{backgroundColor:"#990000"}},flex:{display:"flex",flexDirection:"column"},textarea:{minHeight:"150px",padding:"5px"},button:{margin:"5px"},select:{marginLeft:"5px"},label:{margin:"5px 0",fontSize:"1.1rem"}}),wA=new RegExp(/\\*\[?\\*\[(\d+)\\*\]\\*\]?(\(.*?\))*/g),NA=new RegExp(/\\*\[?\\*\[(\d+)\\*\]\\*\]?(\(.*?\))*/g);function kA(){var A=yA(),e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useRef)(null),s=Object(n.useRef)(null),o=Object(n.useRef)(null),l=function(A){if(!a){var e=A.current.selectionStart,t=A.current.selectionEnd;o.current.focus(),setTimeout((function(){var n=o.current.innerHTML;o.current.innerHTML="";var a=(new lA.a).turndown(n),r="".concat(A.current.value.substring(0,e)).concat(a).concat(A.current.value.substring(t));A.current.focus(),A.current.value=r,A.current.selectionEnd=t+a.length}),[])}};function u(){a||(c.current.value=c.current.value.replace(wA,'<a class="inline-reference" id="inline$1" href="#$1">$1</a>'))}function d(){a||(s.current.value=s.current.value.replace(NA,'\n<a class="reference" id="$1" href="#inline$1">[$1]</a>'))}function b(){c.current.setAttribute("readonly",""),c.current.style.color="gray",s.current.setAttribute("readonly",""),s.current.style.color="gray"}function p(){return(p=Object(D.a)(E.a.mark((function A(){var e,t,n;return E.a.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return e=c.current,t=s.current,n=e.value+"\n\n*****\n\n"+t.value,A.t0=console,A.next=6,navigator.clipboard.writeText(n);case 6:A.t1=A.sent,A.t0.log.call(A.t0,A.t1),alert("Article converted and copied to clipboard successfully.");case 9:case"end":return A.stop()}}),A)})))).apply(this,arguments)}return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(g,{name:"Article Converter"}),Object(O.jsxs)("div",{className:A.page,children:[Object(O.jsx)(j.a,{variant:"h4",children:"LSE Law Review Article Converter"}),Object(O.jsxs)("div",{className:A.flex,children:[Object(O.jsx)("label",{for:"bodytextbox",className:A.label,children:"Main Article Body:"}),Object(O.jsx)("textarea",{className:A.textarea,id:"bodytextbox",onPaste:function(){return l(c)},ref:c,placeholder:"Type or paste the main article body here, then click the buttons below to convert the footnote format."})]}),Object(O.jsx)("br",{}),Object(O.jsxs)("div",{className:A.flex,style:{height:"25%"},children:[Object(O.jsx)("label",{for:"footnotestextbox",className:A.label,children:"Footnotes:"}),Object(O.jsx)("textarea",{className:A.textarea,id:"footnotestextbox",ref:s,onPaste:function(){return l(s)},placeholder:"Type or paste the article footnotes section here, then click the buttons below to convert the footnote format."})]}),Object(O.jsxs)("div",{className:A.button,style:{height:"10%"},children:[Object(O.jsx)("br",{}),Object(O.jsx)(h.a,{variant:"contained",color:"primary",onClick:function(){b(),u(),d(),function(){p.apply(this,arguments)}(),r(!0)},className:A.button,children:"Convert and Copy Entire Article"}),Object(O.jsx)(h.a,{variant:"contained",color:"primary",onClick:function(){b(),u(),d(),alert("Article converted successfully."),r(!0)},className:A.button,children:"Convert Only"}),Object(O.jsx)(h.a,{variant:"contained",color:"secondary",onClick:function(){r(!1);var A=c.current;A.value="",A.style.color="black",A.removeAttribute("readonly");var e=s.current;e.value="",e.style.color="black",e.removeAttribute("readonly")},className:A.button,style:{float:"right"},children:"Reset"})]})]}),Object(O.jsx)("div",{contentEditable:!0,ref:o,style:{opacity:0,position:"fixed"}})]})}var CA=function(){return Object(O.jsxs)(s.a,{children:[Object(O.jsx)(OA,{}),Object(O.jsxs)(o.c,{children:[Object(O.jsx)(o.a,{path:"/",exact:!0,component:k}),Object(O.jsx)(o.a,{path:"/posts/add",exact:!0,component:jA}),Object(O.jsx)(o.a,{path:"/posts",exact:!0,component:M}),Object(O.jsx)(o.a,{path:"/authors/add",exact:!0,component:W}),Object(O.jsx)(o.a,{path:"/authors",exact:!0,component:V}),Object(O.jsx)(o.a,{path:"/post/:id",exact:!0,component:hA}),Object(O.jsx)(o.a,{path:"/author/:id",exact:!0,component:xA}),Object(O.jsx)(o.a,{path:"/visitors",exact:!0,component:gA}),Object(O.jsx)(o.a,{path:"/converter",exact:!0,component:kA}),Object(O.jsx)(o.a,{path:"/",component:mA})]})]})},EA=function(A){A&&A instanceof Function&&t.e(3).then(t.bind(null,428)).then((function(e){var t=e.getCLS,n=e.getFID,a=e.getFCP,r=e.getLCP,c=e.getTTFB;t(A),n(A),a(A),r(A),c(A)}))},SA=(t(366),t(367),t(368),t(423));c.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(SA.a,{children:Object(O.jsx)(CA,{})})}),document.getElementById("root")),EA()}},[[369,1,2]]]);
//# sourceMappingURL=main.606789eb.chunk.js.map