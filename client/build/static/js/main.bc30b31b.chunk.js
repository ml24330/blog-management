(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{197:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return y}));var a=n(10),r=n(13),c=n(19),s=n.n(c),i=n(31),o=n(5),u=n(0),l=n(21),d=n(33),j=n(198),b=n(29),h=n(91),p=n(50),x=n(95),m=n(120),O=n(46),f=n(22),g=n(1),v=Object(x.a)({page:{padding:"2% 10%"},input_long:{margin:"15px 5px",width:"100%"},button:{margin:"20px 10px",width:"10%"},link:{textDecoration:"underline",cursor:"pointer","&:hover":{color:"purple"}},image:{width:"30%",margin:"10px 0"}});function y(t){var n=t.match,c=t.history,x=Object(d.a)("author_".concat(n.params.id),{}),y=Object(o.a)(x,2),w=y[0],N=y[1],k=Object(d.a)("image_".concat(n.params.id),""),C=Object(o.a)(k,2),S=C[0],A=C[1],_=Object(d.a)("modified_".concat(n.params.id),!1),F=Object(o.a)(_,2),E=F[0],P=F[1],D=Object(u.useState)(""),I=Object(o.a)(D,2),T=I[0],W=I[1],B=Object(u.useState)(!0),H=Object(o.a)(B,2),J=H[0],M=H[1],R=v();Object(u.useEffect)((function(){E||Object(i.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f.a,"/authors/").concat(n.params.id),{credentials:"include"});case 2:if(401!==(t=e.sent).status){e.next=6;break}return M(!1),e.abrupt("return");case 6:return 404===t.status&&c.push("/404"),e.next=9,t.json();case 9:a=e.sent,N(a);case 11:case"end":return e.stop()}}),e)})))()}),[n.params.id,E]),Object(u.useEffect)((function(){if(!E)try{var t=new e.from(w.image.data).toString("base64");A("data:image/png;base64,".concat(t))}catch(n){A(j.a)}}),[w.image,E]);var L=function(e){return void 0!==e},V=function(e,t){P(!0),N((function(n){return Object(r.a)(Object(r.a)({},n),{},Object(a.a)({},t,e.target.value))}))},z=function(){var e=Object(i.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w.name&&w.bio&&w.category){e.next=3;break}return W("Missing fields!"),e.abrupt("return");case 3:return t=new FormData,console.log(S),S.size&&t.append("image",S),t.append("name",w.name),t.append("bio",w.bio),t.append("category",w.category),e.next=11,fetch("".concat(f.a,"/authors/").concat(w._id),{credentials:"include",method:"PATCH",body:t});case 11:if(401!==(n=e.sent).status){e.next=15;break}return M(!1),e.abrupt("return");case 15:200===n.status?(P(!1),W(Object(g.jsxs)(g.Fragment,{children:["Author successfully edited. ",Object(g.jsx)("span",{className:R.link,onClick:function(){P(!1),window.location.reload()},children:"Refresh"})," the page to see."]}))):W("An error occurred! API returned with status ".concat(n.status,"."));case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==window.confirm("Are you sure you want to delete the author ".concat(w.name,"? This cannot be undone."))){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,fetch("".concat(f.a,"/authors/").concat(w._id),{credentials:"include",method:"DELETE"});case 5:if(401!==(t=e.sent).status){e.next=9;break}return M(!1),e.abrupt("return");case 9:204===t.status?(W(Object(g.jsxs)(g.Fragment,{children:["Author successfully deleted. Go back to all authors ",Object(g.jsx)(l.b,{className:R.link,to:"/authors",children:"here"}),"."]})),localStorage.removeItem("author_".concat(n.params.id)),localStorage.removeItem("image_".concat(n.params.id)),localStorage.removeItem("modified_".concat(n.params.id))):W("An error occurred! API returned with status ".concat(t.status,"."));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(b.a,{name:w.name}),Object(g.jsxs)("div",{className:R.page,children:[!J&&Object(g.jsx)(O.a,{}),Object(g.jsx)(l.b,{to:"/authors",children:Object(g.jsx)(p.a,{variant:"outlined",color:"primary",children:"Back to all authors"})}),L(w.name)&&Object(g.jsx)("div",{children:Object(g.jsx)(h.a,{className:R.input_long,label:"Name",value:w.name,onChange:function(e){return V(e,"name")}})}),L(w.bio)&&Object(g.jsx)("div",{children:Object(g.jsx)(h.a,{className:R.input_long,label:"Bio",value:w.bio||"",onChange:function(e){return V(e,"bio")}})}),L(w.category)&&Object(g.jsx)("div",{children:Object(g.jsx)(h.a,{className:R.input_long,label:"Category",value:w.category||"",onChange:function(e){return V(e,"category")}})}),L(S)&&Object(g.jsxs)("div",{children:[Object(g.jsx)("img",{className:R.image,src:S,onError:function(e){e.target.onerror=null,e.target.src=URL.createObjectURL(S)},alt:"avatar"}),Object(g.jsx)("div",{children:Object(g.jsx)("input",{className:R.input_long,type:"file",accept:".png,.jpg,.jpeg,.gif,.webp,.heif",onChange:function(e){P(!0),A(e.target.files[0])}})})]}),Object(g.jsx)(p.a,{className:R.button,variant:"contained",color:"primary",onClick:z,children:"Save"}),Object(g.jsx)(p.a,{className:R.button,variant:"contained",color:"secondary",onClick:U,children:"Delete"}),Object(g.jsx)(p.a,{className:R.button,variant:"contained",color:"secondary",onClick:function(){P(!1)},children:"Reset"}),Object(g.jsx)(m.a,{children:T})]})]})}}).call(this,n(372).Buffer)},198:function(e,t,n){"use strict";t.a=n.p+"static/media/placeholder.0a8adf32.png"},22:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var a="/api",r="https://blog.lselawreview.com"},232:function(e,t,n){},233:function(e,t,n){},29:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var a=n(5),r=(n(0),n(21)),c=n(95),s=n(381),i=n(383),o=n(120),u=n(82),l=n(50),d=n(191),j=n.n(d),b=n(208),h=n(1),p=Object(c.a)((function(e){return{link:{fontSize:"1rem","&:hover":{color:"#CBC3E3"}},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function x(e){var t=e.name,n=Object(b.a)(["session-token"]),c=Object(a.a)(n,3),d=(c[0],c[1],c[2]),x=Object(b.a)(["auth-token"]),m=Object(a.a)(x,3),O=(m[0],m[1],m[2]),f=p();return Object(h.jsx)(s.a,{position:"static",children:Object(h.jsxs)(i.a,{children:[Object(h.jsx)(r.b,{to:"/",className:f.link,children:Object(h.jsx)(u.a,{edge:"start",color:"inherit","aria-label":"menu",className:f.menuButton,children:Object(h.jsx)(j.a,{})})}),Object(h.jsx)(o.a,{variant:"h6",className:f.title,children:t}),Object(h.jsx)(l.a,{color:"inherit",onClick:function(){d("session-token"),O("auth-token"),localStorage.clear(),window.location.reload()},children:"Log out"})]})})}},33:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(5),r=n(0);function c(e,t){var n=Object(r.useState)((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(a){return console.log(a),t}})),c=Object(a.a)(n,2),s=c[0],i=c[1];return[s,function(t){try{var n=t instanceof Function?t(s):t;i(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(a){console.log(a)}}]}},377:function(e,t,n){},378:function(e,t,n){},379:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),s=n.n(c),i=(n(232),n(233),n(21)),o=n(23),u=n(29),l=n(95),d=n(427),j=n(428),b=n(120),h=n(432),p=n(1),x=Object(l.a)({page:{padding:"2% 10%"},root:{width:"48%",margin:"2%"},card:{minHeight:"150px","&:hover":{background:"#CBC3E3"}},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12},foot:{position:"absolute",bottom:"10px",left:"10px",textDecoration:"underline"}});function m(){var e=x();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(u.a,{name:"Home"}),Object(p.jsxs)("div",{className:e.page,children:[Object(p.jsx)(b.a,{component:"div",children:Object(p.jsx)(h.a,{fontSize:"h3.fontSize",textAlign:"center",children:"Welcome!"})}),Object(p.jsxs)(h.a,{display:"flex",children:[Object(p.jsx)(i.b,{to:"/posts",className:e.root,children:Object(p.jsx)(d.a,{className:e.card,children:Object(p.jsxs)(j.a,{children:[Object(p.jsx)(b.a,{variant:"h5",component:"h2",children:"Blog Posts"}),Object(p.jsx)("br",{}),Object(p.jsx)(b.a,{variant:"body2",component:"p",children:"Click here to view and edit all posts published to the LSE Law Review Blog."})]})})}),Object(p.jsx)(i.b,{to:"/authors",className:e.root,children:Object(p.jsx)(d.a,{className:e.card,children:Object(p.jsxs)(j.a,{children:[Object(p.jsx)(b.a,{variant:"h5",component:"h2",children:"Blog Authors"}),Object(p.jsx)("br",{}),Object(p.jsx)(b.a,{variant:"body2",component:"p",children:"Click here to view and edit the details of all contributors and editors of the LSE Law Review Blog."})]})})})]}),Object(p.jsx)(i.b,{to:"/visitors",children:Object(p.jsx)(b.a,{className:e.foot,variant:"body2",component:"p",children:"Visitors"})})]})]})}var O=n(19),f=n.n(O),g=n(13),v=n(31),y=n(5),w=n(75),N=n(50),k=n(46),C=n(22);window.React=n(0);function S(){var e=Object(a.useState)([]),t=Object(y.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!0),s=Object(y.a)(c,2),o=s[0],l=s[1],d=[{field:"title",headerName:"Title",flex:3,minWidth:150},{field:"_author",headerName:"Author",flex:1.5,minWidth:150,valueFormatter:function(e){return e.value.join(" & ")}},{field:"_categories",headerName:"Categories",flex:1.4,minWidth:150},{field:"date",headerName:"Date",flex:1.4,minWidth:140,valueFormatter:function(e){return function(e){var t=new Date(e),n=t.getDate(),a={0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"}[t.getMonth()],r=t.getFullYear();return"".concat(n," ").concat(a," ").concat(r)}(new Date(e.value))}},{field:"content",headerName:"Content",flex:3,minWidth:180},{field:"_id",sortable:!1,headerName:"\n",flex:.7,minWidth:80,renderCell:function(e){return Object(p.jsx)(i.b,{to:"/post/".concat(e.value),style:{margin:"auto"},children:Object(p.jsx)(N.a,{variant:"contained",color:"secondary",children:"Edit"})})}},{field:"url",sortable:!1,headerName:"\n",flex:1.5,minWidth:150,renderCell:function(e){return Object(p.jsx)("a",{href:e.value,style:{margin:"auto"},rel:"noopener noreferrer",target:"_blank",children:Object(p.jsx)(N.a,{variant:"contained",color:"primary",children:"View on blog"})})}}];return Object(a.useEffect)((function(){Object(v.a)(f.a.mark((function e(){var t,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C.a,"/posts"),{credentials:"include"});case 2:if(401!==(t=e.sent).status){e.next=6;break}return l(!1),e.abrupt("return");case 6:return e.next=8,t.json();case 8:n=e.sent,(a=n.map((function(e){var t;t=e.authors.length?e.authors:[e.author];var n=e.categories.join(" & "),a="".concat(C.b,"/").concat(new Date(e.date).getFullYear(),"/").concat(("0"+(new Date(e.date).getMonth()+1)).slice(-2),"/").concat(e.slug),r=e._id;return Object(g.a)(Object(g.a)({},e),{},{_author:t,url:a,id:r,_categories:n})}))).reverse(),r(a);case 12:case"end":return e.stop()}}),e)})))()}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(u.a,{name:"All Posts"}),!o&&Object(p.jsx)(k.a,{}),Object(p.jsx)("div",{style:{margin:"20px",textAlign:"center"},children:Object(p.jsx)(i.b,{to:"/posts/add",children:Object(p.jsx)(N.a,{variant:"contained",color:"secondary",children:"Add Post"})})}),Object(p.jsx)(w.a,{autoHeight:!0,style:{width:"98%",margin:"auto"},sortingOrder:["asc","desc"],rows:n,columns:d})]})}var A=n(10),_=n(33),F=n(91),E={name:"",category:"",bio:""},P=Object(l.a)({page:{padding:"2% 10%"},input_long:{margin:"15px 5px",width:"100%"},button:{margin:"20px 10px",width:"10%"},link:{textDecoration:"underline",cursor:"pointer","&:hover":{color:"purple"}},image:{width:"30%",margin:"10px 0"}});function D(){var e=Object(_.a)("author",E),t=Object(y.a)(e,2),n=t[0],r=t[1],c=Object(_.a)("image",{}),s=Object(y.a)(c,2),o=s[0],l=s[1],d=Object(a.useState)(""),j=Object(y.a)(d,2),h=j[0],x=j[1],m=Object(a.useState)(!0),O=Object(y.a)(m,2),w=O[0],S=O[1],D=P(),I=function(e){return void 0!==e},T=function(e,t){r((function(n){return Object(g.a)(Object(g.a)({},n),{},Object(A.a)({},t,e.target.value))}))},W=function(){var e=Object(v.a)(f.a.mark((function e(){var t,a,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new FormData,n.name&&n.bio&&n.category){e.next=4;break}return x("Missing fields!"),e.abrupt("return");case 4:return t.append("image",o),t.append("name",n.name),t.append("bio",n.bio),t.append("category",n.category),e.next=10,fetch("".concat(C.a,"/authors"),{method:"POST",body:t});case 10:if(401!==(a=e.sent).status){e.next=14;break}return S(!1),e.abrupt("return");case 14:if(200!==a.status){e.next=23;break}return e.next=17,a.json();case 17:r=e.sent,c=r._id,x(Object(p.jsxs)(p.Fragment,{children:["Author successfully added. Click ",Object(p.jsx)(i.b,{className:D.link,to:"/author/".concat(c),children:"here"})," to view."]})),B(),e.next=24;break;case 23:x("An error occurred! API returned with status ".concat(a.status,"."));case 24:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){r(E),l({})};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(u.a,{name:"New Author"}),Object(p.jsxs)("div",{className:D.page,children:[!w&&Object(p.jsx)(k.a,{}),Object(p.jsx)(i.b,{to:"/authors",children:Object(p.jsx)(N.a,{variant:"outlined",color:"primary",children:"Back to all authors"})}),I(n.name)&&Object(p.jsx)("div",{children:Object(p.jsx)(F.a,{className:D.input_long,label:"Name",value:n.name,onChange:function(e){return T(e,"name")}})}),I(n.bio)&&Object(p.jsx)("div",{children:Object(p.jsx)(F.a,{className:D.input_long,label:"Bio",value:n.bio,onChange:function(e){return T(e,"bio")}})}),I(n.category)&&Object(p.jsx)("div",{children:Object(p.jsx)(F.a,{className:D.input_long,label:"Category",value:n.category,onChange:function(e){return T(e,"category")}})}),I(o)&&Object(p.jsxs)("div",{children:[o.size&&Object(p.jsx)("div",{children:Object(p.jsx)("img",{className:D.image,src:URL.createObjectURL(o),alt:"avatar "})}),Object(p.jsx)("div",{children:Object(p.jsx)("input",{className:D.input_long,type:"file",accept:".png,.jpg,.jpeg,.gif,.webp,.heif",onChange:function(e){return l(e.target.files[0])}})})]}),Object(p.jsx)(N.a,{className:D.button,variant:"contained",color:"primary",onClick:W,children:"Save"}),Object(p.jsx)(N.a,{className:D.button,variant:"contained",color:"secondary",onClick:B,children:"Clear"}),Object(p.jsx)(b.a,{children:h})]})]})}function I(){var e=Object(a.useState)([]),t=Object(y.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!0),s=Object(y.a)(c,2),o=s[0],l=s[1];Object(a.useEffect)((function(){Object(v.a)(f.a.mark((function e(){var t,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C.a,"/authors"),{credentials:"include"});case 2:if(401!==(t=e.sent).status){e.next=6;break}return l(!1),e.abrupt("return");case 6:return e.next=8,t.json();case 8:n=e.sent,a=n.map((function(e){var t=e._id,n="".concat(C.b,"/author/").concat(e.name),a=e.image&&e.image.data?"Yes":"No";return Object(g.a)(Object(g.a)({},e),{},{id:t,url:n,_image:a})})),r(a);case 11:case"end":return e.stop()}}),e)})))()}),[]);var d=[{field:"name",headerName:"Name",flex:1.8,minWidth:150},{field:"category",headerName:"Category",flex:1.4,minWidth:150,valueFormatter:function(e){return e.value.charAt(0).toUpperCase()+e.value.slice(1)}},{field:"bio",headerName:"Bio",flex:5,minWidth:150},{field:"_image",headerName:"Has avatar?",flex:1.3,minWidth:150},{field:"_id",sortable:!1,headerName:"\n",flex:.7,minWidth:80,renderCell:function(e){return Object(p.jsx)(i.b,{style:{margin:"auto"},to:"/author/".concat(e.value),children:Object(p.jsx)(N.a,{variant:"contained",color:"secondary",children:"Edit"})})}},{field:"url",sortable:!1,headerName:"\n",flex:1.5,minWidth:150,renderCell:function(e){return Object(p.jsx)("a",{href:e.value,style:{margin:"auto"},rel:"noopener noreferrer",target:"_blank",children:Object(p.jsx)(N.a,{variant:"contained",color:"primary",children:"View on blog"})})}}];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(u.a,{name:"All Authors"}),Object(p.jsxs)("div",{style:{margin:"20px",textAlign:"center"},children:[!o&&Object(p.jsx)(k.a,{}),Object(p.jsx)(i.b,{to:"/authors/add",children:Object(p.jsx)(N.a,{variant:"contained",color:"secondary",children:"Add Author"})})]}),Object(p.jsx)(w.a,{autoHeight:!0,style:{width:"98%",margin:"auto"},sortingOrder:["asc","desc"],rows:n,columns:d})]})}var T=n(15),W=n(193),B=n.n(W),H=n(199),J=n(194),M=n.n(J),R=n(195),L=n.n(R),V=n.p+"static/media/time.416a61b0.svg",z=Object(l.a)({modal:{position:"sticky",top:0,left:0,width:"100vw",backgroundColor:"white",padding:"2% 0",minHeight:"100vh",margin:0,zIndex:999,textAlign:"right"},button:{position:"sticky",top:"15px",right:"20px"}});function U(e){var t=e.setIsOpen,n=e.isOpen,a=e.post,r=z();return Object(p.jsx)(p.Fragment,{children:n&&Object(p.jsxs)("div",{className:r.modal,children:[Object(p.jsx)(N.a,{className:r.button,variant:"contained",color:"secondary",onClick:function(){return t(!1)},children:"Close"}),Object(p.jsxs)("div",{className:"post-container",children:[0!==a.authors.length&&Object(p.jsx)("span",{className:"post-author",children:a.authors.map((function(e,t){return Object(p.jsxs)("span",{children:[Object(p.jsx)("span",{children:e}),t+1!==a.authors.length&&Object(p.jsx)("span",{children:" & "})]},e)}))}),Object(p.jsx)("span",{children:" - "}),Object(p.jsx)("span",{children:a.categories.map((function(e,t){return Object(p.jsxs)("span",{children:[Object(p.jsx)("span",{children:e}),t+1!==a.categories.length&&Object(p.jsx)("span",{children:" & "})]},e)}))}),Object(p.jsx)("div",{className:"post-title",children:a.title}),Object(p.jsxs)("div",{className:"post-meta",children:[Object(p.jsx)("span",{className:"post-date",children:function(e){var t=new Date(e),n=t.getDate(),a={0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"}[t.getMonth()],r=t.getFullYear();return"".concat(n," ").concat(a," ").concat(r)}(a.date)}),Object(p.jsxs)("span",{className:"post-views",children:[a.visits," ",1===a.visits?"view":"views"]}),Object(p.jsxs)("span",{className:"post-time",children:[Object(p.jsx)("img",{src:V,alt:"time"}),Math.ceil(L()(M()(a.content).split("[1]")[0],{wordsPerMinute:250}).minutes)," min read"]})]}),Object(p.jsx)("div",{className:"page-content",children:Object(p.jsx)(B.a,{rehypePlugins:[H.a],children:a.content})})]})]})})}var Y=n(89),G=n.n(Y),q=n(90),K=n.n(q),Q={title:"",author:"",authors:[],categories:[],visits:0,content:"",date:Date.now()},X=Object(l.a)({page:{padding:"2% 10%"},input_long:{margin:"15px 5px",width:"100%"},input:{margin:"15px 5px",width:"max(20%,200px)"},icon:{position:"absolute",width:"40px",transform:"translate(-40px,33px)",cursor:"pointer","&:hover":{color:"purple"}},button:{margin:"20px 10px",width:"10%"},textarea:{margin:"5px",width:"100%",maxHeight:"300px",overflow:"scroll","&:hover":{maxHeight:"unset"}},link:{textDecoration:"underline",cursor:"pointer","&:hover":{color:"purple"}}});function Z(){var e=Object(_.a)("post",Q),t=Object(y.a)(e,2),n=t[0],r=t[1],c=Object(_.a)("n-a",""),s=Object(y.a)(c,2),o=s[0],l=s[1],d=Object(_.a)("n-c",""),j=Object(y.a)(d,2),h=j[0],x=j[1],m=Object(a.useState)(""),O=Object(y.a)(m,2),w=O[0],S=O[1],E=Object(a.useState)(!1),P=Object(y.a)(E,2),D=P[0],I=P[1],W=Object(a.useState)(!0),B=Object(y.a)(W,2),H=B[0],J=B[1],M=X(),R=function(e){return void 0!==e},L=function(e,t){r((function(n){return Object(g.a)(Object(g.a)({},n),{},Object(A.a)({},t,e.target.value))}))},V=function(e,t,n){r((function(a){var r=a[t].map((function(t,a){return a===n?e.target.value:t}));return Object(g.a)(Object(g.a)({},a),{},Object(A.a)({},t,r))}))},z=function(e,t){e&&r((function(n){var a=Object(T.a)(n[t]);return a.push(e),Object(g.a)(Object(g.a)({},n),{},Object(A.a)({},t,a))}))},Y=function(e,t){r((function(n){var a=Object(T.a)(n[t]);return a.splice(e,1),Object(g.a)(Object(g.a)({},n),{},Object(A.a)({},t,a))}))},q=function(){r(Q),l(""),x("")},Z=function(){var e=Object(v.a)(f.a.mark((function e(){var t,a,r,c,s,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.title&&n.date&&n.authors.length&&n.categories.length&&n.content){e.next=3;break}return S("Missing fields!"),e.abrupt("return");case 3:if(!(n.visits<0||n.visits%1)){e.next=6;break}return S("The number of visits must be a non-negative integer!"),e.abrupt("return");case 6:return t=n.authors.length>1?{title:n.title,authors:n.authors,categories:n.categories,date:n.date,content:n.content}:{title:n.title,author:n.authors[0],categories:n.categories,date:n.date,content:n.content},e.next=9,fetch("".concat(C.a,"/posts"),{credentials:"include",method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)});case 9:if(401!==(a=e.sent).status){e.next=13;break}return J(!1),e.abrupt("return");case 13:if(200===a.status){e.next=16;break}return S("An error occurred! API returned with status ".concat(a.status)),e.abrupt("return");case 16:return e.next=18,a.json();case 18:return r=e.sent,e.next=21,fetch("".concat(C.a,"/visits/").concat(r.slug),{credentials:"include"});case 21:if(401!==(c=e.sent).status){e.next=25;break}return J(!1),e.abrupt("return");case 25:if(200===c.status){e.next=35;break}return e.next=28,fetch("".concat(C.a,"/visits/").concat(r.slug),{credentials:"include",method:"POST"});case 28:if(401!==(s=e.sent).status){e.next=32;break}return J(!1),e.abrupt("return");case 32:if(200===s.status){e.next=35;break}return S("An error occurred! API returned with status ".concat(s.status)),e.abrupt("return");case 35:return e.next=37,fetch("".concat(C.a,"/visits/").concat(r.slug),{credentials:"include",method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify({type:"set",value:n.visits})});case 37:if(401!==(o=e.sent).status){e.next=41;break}return J(!1),e.abrupt("return");case 41:if(200===o.status){e.next=44;break}return S("An error occurred! API returned with status ".concat(o.status)),e.abrupt("return");case 44:S(Object(p.jsxs)(p.Fragment,{children:["Post successfully added. Click ",Object(p.jsx)(i.b,{className:M.link,to:"/post/".concat(r._id),children:"here"})," to view."]})),q();case 46:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(u.a,{name:"New Post"}),Object(p.jsx)(U,{setIsOpen:I,isOpen:D,post:n}),Object(p.jsxs)("div",{className:M.page,children:[!H&&Object(p.jsx)(k.a,{}),Object(p.jsx)(i.b,{to:"/posts",children:Object(p.jsx)(N.a,{variant:"outlined",color:"primary",children:"Back to all posts"})}),R(n.title)&&Object(p.jsx)("div",{children:Object(p.jsx)(F.a,{className:M.input_long,label:"Title",value:n.title,onChange:function(e){return L(e,"title")}})}),R(n.date)&&Object(p.jsx)("div",{children:Object(p.jsx)(F.a,{className:M.input_long,label:"Date",type:"date",value:new Date(n.date||0).toISOString().substr(0,10),onChange:function(e){return L(e,"date")}})}),R(n.categories)&&Object(p.jsxs)("div",{children:[n.categories.map((function(e,t){return Object(p.jsxs)("span",{children:[Object(p.jsx)(F.a,{className:M.input,label:"Category",value:e,onChange:function(e){return V(e,"categories",t)}}),Object(p.jsx)(G.a,{style:{color:"darkred"},className:M.icon,onClick:function(){return Y(t,"categories")}})]},t)})),Object(p.jsx)(F.a,{className:M.input,label:"New Category",value:h,onChange:function(e){return x(e.target.value)}}),Object(p.jsx)(K.a,{style:{color:"green"},className:M.icon,onClick:function(){z(h,"categories"),x("")}})]}),R(n.authors)&&Object(p.jsxs)("div",{children:[n.authors.map((function(e,t){return Object(p.jsxs)("span",{children:[Object(p.jsx)(F.a,{className:M.input,label:"Author",value:e,onChange:function(e){return V(e,"authors",t)}}),Object(p.jsx)(G.a,{style:{color:"darkred"},className:M.icon,onClick:function(){return Y(t,"authors")}})]},t)})),Object(p.jsx)(F.a,{className:M.input,label:"New Author",value:o,onChange:function(e){return l(e.target.value)}}),Object(p.jsx)(K.a,{style:{color:"green"},className:M.icon,onClick:function(){z(o,"authors"),l("")}})]}),R(n.visits)&&Object(p.jsx)("div",{children:Object(p.jsx)(F.a,{className:M.input_long,label:"Views",type:"number",value:n.visits,onChange:function(e){return L(e,"visits")}})}),R(n.content)&&Object(p.jsx)("div",{children:Object(p.jsx)(F.a,{className:M.textarea,multiline:!0,label:"Content",value:n.content||"",onChange:function(e){return L(e,"content")}})}),Object(p.jsx)(N.a,{className:M.button,variant:"contained",color:"primary",onClick:Z,children:"Save"}),Object(p.jsx)(N.a,{className:M.button,variant:"contained",onClick:function(){I(!0),window.scrollTo(0,0)},children:"Preview"}),Object(p.jsx)(N.a,{className:M.button,variant:"contained",color:"secondary",onClick:q,children:"Clear"}),Object(p.jsx)(b.a,{children:w})]})]})}var $=Object(l.a)({page:{padding:"2% 10%"},input_long:{margin:"15px 5px",width:"100%"},input:{margin:"15px 5px",width:"max(20%,200px)"},icon:{position:"absolute",width:"40px",transform:"translate(-40px,33px)",cursor:"pointer","&:hover":{color:"purple"}},button:{margin:"20px 10px",width:"10%"},textarea:{margin:"5px",width:"100%",maxHeight:"300px",overflow:"scroll","&:hover":{maxHeight:"unset"}},link:{textDecoration:"underline",cursor:"pointer","&:hover":{color:"purple"}}});function ee(e){var t=e.match,n=e.history,r=Object(_.a)("post_".concat(t.params.id),{}),c=Object(y.a)(r,2),s=c[0],o=c[1],l=Object(_.a)("modified_".concat(t.params.id),!1),d=Object(y.a)(l,2),j=d[0],h=d[1],x=Object(_.a)("n-a_".concat(t.params.id),""),m=Object(y.a)(x,2),O=m[0],w=m[1],S=Object(_.a)("n-c_".concat(t.params.id),""),E=Object(y.a)(S,2),P=E[0],D=E[1],I=Object(a.useState)(""),W=Object(y.a)(I,2),B=W[0],H=W[1],J=Object(a.useState)(!1),M=Object(y.a)(J,2),R=M[0],L=M[1],V=Object(a.useState)(!0),z=Object(y.a)(V,2),Y=z[0],q=z[1],Q=$();Object(a.useEffect)((function(){j||Object(v.a)(f.a.mark((function e(){var a,r,c,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C.a,"/post/id/").concat(t.params.id),{credentials:"include"});case 2:if(401!==(a=e.sent).status){e.next=6;break}return q(!1),e.abrupt("return");case 6:return 404===a.status&&n.push("/404"),e.next=9,a.json();case 9:return r=e.sent,e.next=12,fetch("".concat(C.a,"/visits/").concat(r.slug),{credentials:"include"});case 12:if(401!==(c=e.sent).status){e.next=16;break}return q(!1),e.abrupt("return");case 16:return e.next=18,c.json();case 18:s=e.sent,r.author&&(r.authors=[r.author]),o(Object(g.a)(Object(g.a)({},r),{},{visits:s.visits}));case 21:case"end":return e.stop()}}),e)})))()}),[t.params.id,j]);var X=function(e){return void 0!==e},Z=function(e,t){h(!0),o((function(n){return Object(g.a)(Object(g.a)({},n),{},Object(A.a)({},t,e.target.value))}))},ee=function(e,t,n){h(!0),o((function(a){var r=a[t].map((function(t,a){return a===n?e.target.value:t}));return Object(g.a)(Object(g.a)({},a),{},Object(A.a)({},t,r))}))},te=function(e,t){e&&(h(!0),o((function(n){var a=Object(T.a)(n[t]);return a.push(e),Object(g.a)(Object(g.a)({},n),{},Object(A.a)({},t,a))})))},ne=function(e,t){h(!0),o((function(n){var a=Object(T.a)(n[t]);return a.splice(e,1),Object(g.a)(Object(g.a)({},n),{},Object(A.a)({},t,a))}))},ae=function(){var e=Object(v.a)(f.a.mark((function e(){var t,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.title&&s.date&&s.authors.length&&s.categories.length&&s.content){e.next=3;break}return H("Missing fields!"),e.abrupt("return");case 3:if(!(s.visits<0||s.visits%1)){e.next=6;break}return H("The number of visits must be a non-negative integer!"),e.abrupt("return");case 6:return t=s.authors.length>1?{title:s.title,authors:s.authors,categories:s.categories,date:s.date,content:s.content}:{title:s.title,author:s.authors[0],categories:s.categories,date:s.date,content:s.content},e.next=9,fetch("".concat(C.a,"/posts/").concat(s._id),{credentials:"include",method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify(t)});case 9:if(401!==(n=e.sent).status){e.next=13;break}return q(!1),e.abrupt("return");case 13:if(200===n.status){e.next=16;break}return H("An error occurred! API returned with status ".concat(n.status)),e.abrupt("return");case 16:return e.next=18,fetch("".concat(C.a,"/visits/").concat(s.slug),{credentials:"include",method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify({type:"set",value:s.visits})});case 18:if(401!==(a=e.sent).status){e.next=22;break}return q(!1),e.abrupt("return");case 22:if(200===a.status){e.next=25;break}return H("An error occurred! API returned with status ".concat(a.status)),e.abrupt("return");case 25:H(Object(p.jsxs)(p.Fragment,{children:["Post successfully saved. ",Object(p.jsx)("span",{className:Q.link,onClick:function(){h(!1),window.location.reload()},children:"Refresh"})," the page to see."]}));case 26:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(v.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==window.confirm("Are you sure you want to delete the post ".concat(s.title,"? This cannot be undone."))){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,fetch("".concat(C.a,"/posts/").concat(s._id),{credentials:"include",method:"DELETE"});case 5:if(401!==(n=e.sent).status){e.next=9;break}return q(!1),e.abrupt("return");case 9:204===n.status?(H(Object(p.jsxs)(p.Fragment,{children:["Post successfully deleted. Go back to all posts ",Object(p.jsx)(i.b,{className:Q.link,to:"/posts",children:"here"}),". "]})),localStorage.removeItem("post_".concat(t.params.id)),localStorage.removeItem("modified_".concat(t.params.id)),localStorage.removeItem("n-a_".concat(t.params.id)),localStorage.removeItem("n-c_".concat(t.params.id))):H("An error occurred! API returned with status ".concat(n.status,"."));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(u.a,{name:s.title}),Object(p.jsx)(U,{setIsOpen:L,isOpen:R,post:s}),Object(p.jsxs)("div",{className:Q.page,children:[!Y&&Object(p.jsx)(k.a,{}),Object(p.jsx)(i.b,{to:"/posts",children:Object(p.jsx)(N.a,{variant:"outlined",color:"primary",children:"Back to all posts"})}),X(s.title)&&Object(p.jsx)("div",{children:Object(p.jsx)(F.a,{className:Q.input_long,label:"Title",value:s.title,onChange:function(e){return Z(e,"title")}})}),X(s.date)&&Object(p.jsx)("div",{children:Object(p.jsx)(F.a,{className:Q.input_long,label:"Date",type:"date",value:new Date(s.date||0).toISOString().substr(0,10),onChange:function(e){return Z(e,"date")}})}),X(s.categories)&&Object(p.jsxs)("div",{children:[s.categories.map((function(e,t){return Object(p.jsxs)("span",{children:[Object(p.jsx)(F.a,{className:Q.input,label:"Category",value:e,onChange:function(e){return ee(e,"categories",t)}}),Object(p.jsx)(G.a,{style:{color:"darkred"},className:Q.icon,onClick:function(){return ne(t,"categories")}})]},t)})),Object(p.jsx)(F.a,{className:Q.input,label:"New Category",value:P,onChange:function(e){return D(e.target.value)}}),Object(p.jsx)(K.a,{style:{color:"green"},className:Q.icon,onClick:function(){te(P,"categories"),D("")}})]}),X(s.authors)&&Object(p.jsxs)("div",{children:[s.authors.map((function(e,t){return Object(p.jsxs)("span",{children:[Object(p.jsx)(F.a,{className:Q.input,label:"Author",value:e,onChange:function(e){return ee(e,"authors",t)}}),Object(p.jsx)(G.a,{style:{color:"darkred"},className:Q.icon,onClick:function(){return ne(t,"authors")}})]},t)})),Object(p.jsx)(F.a,{className:Q.input,label:"New Author",value:O,onChange:function(e){return w(e.target.value)}}),Object(p.jsx)(K.a,{style:{color:"green"},className:Q.icon,onClick:function(){te(O,"authors"),w("")}})]}),X(s.visits)&&Object(p.jsx)("div",{children:Object(p.jsx)(F.a,{className:Q.input_long,label:"Views",type:"number",value:s.visits,onChange:function(e){return Z(e,"visits")}})}),X(s.content)&&Object(p.jsx)("div",{children:Object(p.jsx)(F.a,{className:Q.textarea,multiline:!0,label:"Content",value:s.content||"",onChange:function(e){return Z(e,"content")}})}),Object(p.jsx)(N.a,{className:Q.button,variant:"contained",color:"primary",onClick:ae,children:"Save"}),Object(p.jsx)(N.a,{className:Q.button,variant:"contained",color:"secondary",onClick:re,children:"Delete"}),Object(p.jsx)(N.a,{className:Q.button,variant:"contained",onClick:function(){L(!0),window.scrollTo(0,0)},children:"Preview"}),Object(p.jsx)(N.a,{className:Q.button,variant:"contained",color:"secondary",onClick:function(){h(!1)},children:"Reset"}),Object(p.jsx)(b.a,{children:B})]})]})}var te=n(197);function ne(e){var t=e.history;return Object(a.useEffect)((function(){setTimeout((function(){t.push("/")}),1500)}),[t]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(u.a,{name:"Error 404"}),Object(p.jsx)(b.a,{style:{textAlign:"center",margin:"20px"},variant:"h4",children:"The page that you were looking for does not exist. Redirecting you to the home page..."})]})}var ae=Object(o.f)((function(e){var t=e.history;return Object(a.useEffect)((function(){var e=t.listen((function(){window.scrollTo(0,0)}));return function(){e()}}),[]),null})),re=Object(l.a)({title:{margin:"20px",textAlign:"center"}});function ce(e){var t=e.history,n=re(),r=Object(a.useState)([]),c=Object(y.a)(r,2),s=c[0],i=c[1],o=Object(a.useState)([]),l=Object(y.a)(o,2),d=l[0],j=l[1],h=Object(a.useState)([]),x=Object(y.a)(h,2),m=x[0],O=x[1],N=Object(a.useState)(!1),k=Object(y.a)(N,2),S=k[0],A=k[1],_=[{field:"time",headerName:"Time",flex:5,minWidth:"200px",valueFormatter:function(e){return new Date(e.value)}},{field:"location",headerName:"Country",flex:2,minWidth:"200px"},{field:"entry",headerName:"Entry point",flex:5,minWidth:"200px"}];return Object(a.useEffect)((function(){Object(v.a)(f.a.mark((function e(){var t,n,a,r,c,s,o,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.prompt("Please enter the access code to view this page!"),e.next=3,fetch("".concat(C.a,"/visits/visitors?pw=").concat(t),{credentials:"include"});case 3:if(200===(n=e.sent).status){e.next=7;break}return A(!0),e.abrupt("return");case 7:return e.next=9,n.json();case 9:a=e.sent,r=a.map((function(e){return Object(g.a)(Object(g.a)({},e),{},{id:e._id,entry:e.entry||"N/A"})})),i(r),c={},a.forEach((function(e){c[e.location]=c[e.location]?++c[e.location]:1})),s=[],Object.keys(c).forEach((function(e,t){s.push({id:t,country:e,value:c[e]})})),j(s.sort((function(e,t){return e.value>t.value?-1:e.value<t.value?1:0}))),o={},a.forEach((function(e){e.entry&&e.entry.split("blog.lselawreview.com").length>1&&(o[e.entry.slice(29)]=o[e.entry.slice(29)]?++o[e.entry.slice(29)]:1)})),u=[],Object.keys(o).forEach((function(e,t){u.push({id:t,entry:e,value:o[e]})})),O(u.sort((function(e,t){return e.value>t.value?-1:e.value<t.value?1:0})));case 22:case"end":return e.stop()}}),e)})))()}),[]),S&&t.push("/"),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(u.a,{name:"Visitors"}),Object(p.jsx)(b.a,{variant:"h4",className:n.title,children:"Top countries"}),Object(p.jsx)(w.a,{autoHeight:!0,style:{width:"98%",margin:"10px auto"},sortingOrder:["asc","desc"],rows:d,columns:[{field:"country",headerName:"Country",flex:5,minWidth:"200px"},{field:"value",headerName:"Value",flex:2,minWidth:"100px"}]}),Object(p.jsx)(b.a,{variant:"h4",className:n.title,children:"Top entry points"}),Object(p.jsx)(w.a,{autoHeight:!0,style:{width:"98%",margin:"10px auto"},sortingOrder:["asc","desc"],rows:m,columns:[{field:"entry",headerName:"Entry point",flex:5,minWidth:"200px"},{field:"value",headerName:"Value",flex:2,minWidth:"100px"}]}),Object(p.jsx)(b.a,{variant:"h4",className:n.title,children:"All visitors"}),Object(p.jsx)(w.a,{autoHeight:!0,style:{width:"98%",margin:"10px auto"},sortingOrder:["asc","desc"],rows:s,columns:_})]})}var se=function(){return Object(p.jsxs)(i.a,{children:[Object(p.jsx)(ae,{}),Object(p.jsxs)(o.c,{children:[Object(p.jsx)(o.a,{path:"/",exact:!0,component:m}),Object(p.jsx)(o.a,{path:"/posts/add",exact:!0,component:Z}),Object(p.jsx)(o.a,{path:"/posts",exact:!0,component:S}),Object(p.jsx)(o.a,{path:"/authors/add",exact:!0,component:D}),Object(p.jsx)(o.a,{path:"/authors",exact:!0,component:I}),Object(p.jsx)(o.a,{path:"/post/:id",exact:!0,component:ee}),Object(p.jsx)(o.a,{path:"/author/:id",exact:!0,component:te.a}),Object(p.jsx)(o.a,{path:"/visitors",exact:!0,component:ce}),Object(p.jsx)(o.a,{path:"/",component:ne})]})]})},ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,435)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},oe=(n(376),n(377),n(378),n(431));s.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(oe.a,{children:Object(p.jsx)(se,{})})}),document.getElementById("root")),ie()},46:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n(120),c=n(95),s=n(1),i=Object(c.a)({div:{textAlign:"center",margin:"15px 0 15px 0"},link:{textDecoration:"underline",cursor:"pointer","&:hover":{color:"purple"}}});function o(){Object(a.useEffect)((function(){window.scrollTo(0,0)}),[]);var e=i();return Object(s.jsx)("div",{className:e.div,children:Object(s.jsxs)(r.a,{variant:"h5",children:["WARNING: You are not logged in! Click ",Object(s.jsx)("span",{onClick:function(){window.location.reload()},className:e.link,children:"here"})," to log in again."]})})}}},[[379,1,2]]]);
//# sourceMappingURL=main.bc30b31b.chunk.js.map